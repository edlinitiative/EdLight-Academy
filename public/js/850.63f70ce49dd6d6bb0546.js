"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[850],{6850:(s,e,a)=>{a.r(e),a.d(e,{default:()=>x});var t=a(6540),r=a(7767),n=a(7028),l=a(3212),c=a(7791),i=a(9920),o=a(4848);function u(s){let{answer:e}=s;const a=(0,c.n7)();let t=null;if("string"==typeof e&&e.startsWith("["))try{const s=JSON.parse(e);Array.isArray(s)&&s.length>0&&void 0!==s[0].math&&(t=s)}catch(s){}return t?(0,o.jsx)("div",{className:"proof-results",children:t.map((s,e)=>(0,o.jsxs)("div",{className:"proof-results__step",children:[(0,o.jsx)("span",{className:"proof-results__step-number",children:e+1}),(0,o.jsxs)("div",{className:"proof-results__step-body",children:[(0,o.jsx)("div",{className:"proof-results__step-math",children:s.math&&(/\$/.test(s.math)||/\\[a-zA-Z]/.test(s.math))?(0,o.jsx)("span",{dangerouslySetInnerHTML:(0,c.qZ)(s.math,a)}):s.math||"(vide)"}),s.justification&&(0,o.jsxs)("div",{className:"proof-results__step-justify",children:["â†³ ",s.justification]})]})]},e))}):(0,o.jsx)(o.Fragment,{children:String(e)})}function m(s){let{status:e}=s;const a={correct:{label:"âœ“ Correct",cls:"exam-results__badge--correct"},incorrect:{label:"âœ— Incorrect",cls:"exam-results__badge--incorrect"},manual:{label:"ğŸ‘ RÃ©vision",cls:"exam-results__badge--manual"},unanswered:{label:"â€” Vide",cls:"exam-results__badge--unanswered"}},t=a[e]||a.unanswered;return(0,o.jsx)("span",{className:"exam-results__badge ".concat(t.cls),children:t.label})}const x=()=>{const{examIndex:s}=(0,r.g)(),e=(0,r.Zp)(),a=(0,t.useMemo)(()=>{try{const e=sessionStorage.getItem("exam-result-".concat(s));return e?JSON.parse(e):null}catch(s){return null}},[s]);if(!a)return(0,o.jsx)("section",{className:"section",children:(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{className:"card card--message",children:[(0,o.jsx)("p",{children:"Aucun rÃ©sultat trouvÃ© pour cet examen."}),(0,o.jsx)("button",{className:"button button--primary",onClick:()=>e("/exams"),children:"â† Retour aux examens"})]})})});const{result:c,examTitle:x,subject:d,level:_}=a,{summary:h,results:p}=c,j=(0,i.cS)(d),N=h.percentage,b=2*Math.PI*54,v=b-b*N/100,g=N>=80?"Excellent !":N>=60?"Bien":N>=40?"Passable":"Ã€ amÃ©liorer",f=N>=80?"ğŸ†":N>=60?"ğŸ‘":N>=40?"ğŸ“–":"ğŸ’ª",q=N>=60?"var(--success-500)":N>=40?"var(--warning-500)":"var(--danger-500)";return(0,o.jsx)("section",{className:"section exam-results",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsxs)("div",{className:"page-header exam-results__header",children:[(0,o.jsx)("button",{className:"button button--ghost button--sm",onClick:()=>e("/exams"),children:"â† Retour aux examens"}),(0,o.jsx)("h1",{className:"page-header__title",children:"RÃ©sultats"}),(0,o.jsxs)("p",{className:"page-header__subtitle",style:{color:j},children:[d," â€” ",x||"Examen"," ",_&&"(".concat(_,")")]})]}),(0,o.jsxs)("div",{className:"exam-results__overview","aria-label":"Score: ".concat(N,"%"),children:[(0,o.jsxs)("div",{className:"exam-results__score-ring",children:[(0,o.jsxs)("svg",{viewBox:"0 0 120 120",className:"exam-results__ring-svg",children:[(0,o.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"rgba(0,0,0,0.06)",strokeWidth:"8"}),(0,o.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:q,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:b,strokeDashoffset:v,transform:"rotate(-90 60 60)",style:{transition:"stroke-dashoffset 1s ease"}})]}),(0,o.jsxs)("div",{className:"exam-results__score-text",children:[(0,o.jsxs)("span",{className:"exam-results__score-pct",children:[N,"%"]}),(0,o.jsxs)("span",{className:"exam-results__score-label",children:[f," ",g]})]})]}),(0,o.jsxs)("div",{className:"exam-results__stats-grid",children:[(0,o.jsxs)("div",{className:"exam-results__stat-card",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.earnedPoints}),(0,o.jsxs)("span",{className:"exam-results__stat-label",children:["Points obtenus / ",h.totalPoints]})]}),(0,o.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--correct",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.correctCount}),(0,o.jsx)("span",{className:"exam-results__stat-label",children:"RÃ©ponses correctes"})]}),(0,o.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--incorrect",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.incorrectCount}),(0,o.jsx)("span",{className:"exam-results__stat-label",children:"RÃ©ponses incorrectes"})]}),(0,o.jsxs)("div",{className:"exam-results__stat-card",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.unanswered}),(0,o.jsx)("span",{className:"exam-results__stat-label",children:"Sans rÃ©ponse"})]}),h.manualReview>0&&(0,o.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--manual",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.manualReview}),(0,o.jsx)("span",{className:"exam-results__stat-label",children:"Correction manuelle"})]}),(0,o.jsxs)("div",{className:"exam-results__stat-card",children:[(0,o.jsx)("span",{className:"exam-results__stat-number",children:h.autoGraded}),(0,o.jsx)("span",{className:"exam-results__stat-label",children:"Auto-corrigÃ©es"})]})]})]}),(0,o.jsxs)("div",{className:"exam-results__details",children:[(0,o.jsx)("h2",{className:"exam-results__details-title",children:"DÃ©tails par question"}),p.map((s,e)=>{const a=(0,i._Y)(s.question.type);return(0,o.jsxs)("div",{className:"card exam-results__item exam-results__item--".concat(s.status),children:[(0,o.jsxs)("div",{className:"exam-results__item-header",children:[(0,o.jsx)("span",{className:"exam-results__item-number",children:s.question._displayNumber||"Q".concat(e+1)}),(0,o.jsxs)("span",{className:"exam-results__item-type",children:[a.icon," ",a.label]}),(0,o.jsx)(m,{status:s.status}),s.result.maxPoints>0&&(0,o.jsxs)("span",{className:"exam-results__item-points",children:[s.result.awarded,"/",s.result.maxPoints," pt",1!==s.result.maxPoints?"s":""]})]}),(0,o.jsx)("div",{className:"exam-results__item-question",children:(0,o.jsx)(l.A,{text:s.question._displayText||s.question.question})}),s.question.has_figure&&s.question.figure_description&&(0,o.jsx)(n.A,{description:s.question.figure_description,compact:!0}),s.userAnswer&&(0,o.jsxs)("div",{className:"exam-results__item-answer",children:[(0,o.jsx)("strong",{children:"Votre rÃ©ponse :"})," ","multiple_choice"===s.question.type&&s.question.options?"".concat(s.userAnswer.toUpperCase(),") ").concat(s.question.options[s.userAnswer]||s.userAnswer):(0,o.jsx)(u,{answer:s.userAnswer})]}),s.question.correct&&(0,o.jsxs)("div",{className:"exam-results__item-correct",children:[(0,o.jsx)("strong",{children:"RÃ©ponse correcte :"})," ","multiple_choice"===s.question.type&&s.question.options?"".concat(s.question.correct.toUpperCase(),") ").concat(s.question.options[s.question.correct]||s.question.correct):String(s.question.correct)]}),s.question.explanation&&(0,o.jsxs)("div",{className:"exam-results__item-explanation",children:["ğŸ’¡ ",s.question.explanation]})]},e)})]}),(0,o.jsxs)("div",{className:"exam-results__actions",children:[(0,o.jsx)("button",{className:"button button--primary",onClick:()=>e("/exams/".concat(s)),children:"ğŸ”„ Recommencer cet examen"}),(0,o.jsx)("button",{className:"button button--ghost",onClick:()=>e("/exams"),children:"ğŸ“ Choisir un autre examen"})]})]})})}}}]);