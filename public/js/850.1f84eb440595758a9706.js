"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[850],{6850:(s,e,a)=>{a.r(e),a.d(e,{default:()=>_});var t=a(6540),r=a(7767),l=a(7028),n=a(3212),c=a(7791),i=a(3263),o=a(9920),u=a(4848);function d(s){let{answer:e,blanks:a}=s,t=[];try{const s=JSON.parse(e);s&&s.scaffold&&(t=s.scaffold)}catch(s){}return t.length?(0,u.jsx)("div",{className:"scaffold-result",children:(a||[]).map((s,e)=>(0,u.jsxs)("div",{className:"scaffold-result__item",children:[(0,u.jsxs)("span",{className:"scaffold-result__label",children:[s.label||"#".concat(e+1)," :"]}),(0,u.jsx)("span",{className:"scaffold-result__value",children:t[e]||"â€”"})]},e))}):(0,u.jsx)("span",{children:e})}function m(s){var e;let{answer:a,correctAnswer:t}=s;const r=(0,c.n7)();let l=null;if("string"==typeof a&&(a.startsWith("{")||a.startsWith("[")))try{const s=JSON.parse(a);s&&s.steps&&Array.isArray(s.steps)?l={steps:s.steps,finalAnswer:s.finalAnswer||""}:Array.isArray(s)&&s.length>0&&void 0!==s[0].math&&(l={steps:s,finalAnswer:""})}catch(s){}if(!l)return(0,u.jsx)(u.Fragment,{children:String(a)});let n=null;l.finalAnswer&&t&&(n=(0,i.Ku)(l.finalAnswer,t));const o=l.steps.filter(s=>{var e;return null===(e=s.math)||void 0===e?void 0:e.trim()});return(0,u.jsxs)("div",{className:"ka-results",children:[(0,u.jsx)("div",{className:"ka-results__steps",children:l.steps.map((s,e)=>{var a;const t=!(null===(a=s.math)||void 0===a||!a.trim());return(0,u.jsxs)("div",{className:"ka-results__step ".concat(t?"ka-results__step--done":"ka-results__step--empty"),children:[(0,u.jsx)("div",{className:"ka-results__step-dot",children:t?(0,u.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",children:(0,u.jsx)("path",{d:"M2 6l3 3 5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,u.jsx)("span",{children:e+1})}),(0,u.jsxs)("div",{className:"ka-results__step-body",children:[(0,u.jsx)("div",{className:"ka-results__step-math",children:s.math&&(/\$/.test(s.math)||/\\[a-zA-Z]/.test(s.math))?(0,u.jsx)("span",{dangerouslySetInnerHTML:(0,c.qZ)(s.math,r)}):s.math||(0,u.jsx)("span",{className:"ka-results__empty",children:"â€”"})}),s.justification&&(0,u.jsxs)("div",{className:"ka-results__step-reason",children:["â†³ ",s.justification]})]})]},e)})}),l.finalAnswer&&(0,u.jsxs)("div",{className:"ka-results__answer ".concat(n?n.correct?"ka-results__answer--correct":"ka-results__answer--incorrect":""),children:[(0,u.jsxs)("div",{className:"ka-results__answer-row",children:[(0,u.jsx)("span",{className:"ka-results__answer-label",children:"ğŸ¯ RÃ©sultat final"}),n&&(0,u.jsx)("span",{className:"ka-results__cas ".concat(n.correct?"ka-results__cas--correct":"ka-results__cas--incorrect"),children:n.correct?"âœ“ Correct":"âœ— Incorrect"})]}),(0,u.jsx)("div",{className:"ka-results__answer-value",children:/\$/.test(l.finalAnswer)||/\\[a-zA-Z]/.test(l.finalAnswer)?(0,u.jsx)("span",{dangerouslySetInnerHTML:(0,c.qZ)(l.finalAnswer,r)}):l.finalAnswer}),n&&"cas"===n.method&&null!=(null===(e=n.details)||void 0===e?void 0:e.valueA)&&(0,u.jsxs)("div",{className:"ka-results__cas-detail",children:["â‰ˆ ",n.details.valueA.toFixed(4),!n.correct&&null!=n.details.valueB&&" â‰  ".concat(n.details.valueB.toFixed(4))]})]}),(0,u.jsxs)("div",{className:"ka-results__summary",children:[o.length," Ã©tape",1!==o.length?"s":""," complÃ©tÃ©e",1!==o.length?"s":""]})]})}function x(s){let{status:e}=s;const a={correct:{label:"âœ“ Correct",cls:"exam-results__badge--correct"},incorrect:{label:"âœ— Incorrect",cls:"exam-results__badge--incorrect"},manual:{label:"ğŸ‘ RÃ©vision",cls:"exam-results__badge--manual"},unanswered:{label:"â€” Vide",cls:"exam-results__badge--unanswered"},"scaffold-complete":{label:"ğŸ“ ComplÃ©tÃ©",cls:"exam-results__badge--correct"}},t=a[e]||a.unanswered;return(0,u.jsx)("span",{className:"exam-results__badge ".concat(t.cls),children:t.label})}const _=()=>{const{examIndex:s}=(0,r.g)(),e=(0,r.Zp)(),a=(0,t.useMemo)(()=>{try{const e=sessionStorage.getItem("exam-result-".concat(s));return e?JSON.parse(e):null}catch(s){return null}},[s]);if(!a)return(0,u.jsx)("section",{className:"section",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"card card--message",children:[(0,u.jsx)("p",{children:"Aucun rÃ©sultat trouvÃ© pour cet examen."}),(0,u.jsx)("button",{className:"button button--primary",onClick:()=>e("/exams"),children:"â† Retour aux examens"})]})})});const{result:c,examTitle:i,subject:_,level:h}=a,{summary:p,results:j}=c,N=(0,o.cS)(_),v=p.percentage,b=2*Math.PI*54,f=b-b*v/100,w=v>=80?"Excellent !":v>=60?"Bien":v>=40?"Passable":"Ã€ amÃ©liorer",g=v>=80?"ğŸ†":v>=60?"ğŸ‘":v>=40?"ğŸ“–":"ğŸ’ª",k=v>=60?"var(--success-500)":v>=40?"var(--warning-500)":"var(--danger-500)";return(0,u.jsx)("section",{className:"section exam-results",children:(0,u.jsxs)("div",{className:"container",children:[(0,u.jsxs)("div",{className:"page-header exam-results__header",children:[(0,u.jsx)("button",{className:"button button--ghost button--sm",onClick:()=>e("/exams"),children:"â† Retour aux examens"}),(0,u.jsx)("h1",{className:"page-header__title",children:"RÃ©sultats"}),(0,u.jsxs)("p",{className:"page-header__subtitle",style:{color:N},children:[_," â€” ",i||"Examen"," ",h&&"(".concat(h,")")]})]}),(0,u.jsxs)("div",{className:"exam-results__overview","aria-label":"Score: ".concat(v,"%"),children:[(0,u.jsxs)("div",{className:"exam-results__score-ring",children:[(0,u.jsxs)("svg",{viewBox:"0 0 120 120",className:"exam-results__ring-svg",children:[(0,u.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"rgba(0,0,0,0.06)",strokeWidth:"8"}),(0,u.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:k,strokeWidth:"8",strokeLinecap:"round",strokeDasharray:b,strokeDashoffset:f,transform:"rotate(-90 60 60)",style:{transition:"stroke-dashoffset 1s ease"}})]}),(0,u.jsxs)("div",{className:"exam-results__score-text",children:[(0,u.jsxs)("span",{className:"exam-results__score-pct",children:[v,"%"]}),(0,u.jsxs)("span",{className:"exam-results__score-label",children:[g," ",w]})]})]}),(0,u.jsxs)("div",{className:"exam-results__stats-grid",children:[(0,u.jsxs)("div",{className:"exam-results__stat-card",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.earnedPoints}),(0,u.jsxs)("span",{className:"exam-results__stat-label",children:["Points obtenus / ",p.totalPoints]})]}),(0,u.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--correct",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.correctCount}),(0,u.jsx)("span",{className:"exam-results__stat-label",children:"RÃ©ponses correctes"})]}),(0,u.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--incorrect",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.incorrectCount}),(0,u.jsx)("span",{className:"exam-results__stat-label",children:"RÃ©ponses incorrectes"})]}),(0,u.jsxs)("div",{className:"exam-results__stat-card",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.unanswered}),(0,u.jsx)("span",{className:"exam-results__stat-label",children:"Sans rÃ©ponse"})]}),p.manualReview>0&&(0,u.jsxs)("div",{className:"exam-results__stat-card exam-results__stat-card--manual",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.manualReview}),(0,u.jsx)("span",{className:"exam-results__stat-label",children:"Correction manuelle"})]}),(0,u.jsxs)("div",{className:"exam-results__stat-card",children:[(0,u.jsx)("span",{className:"exam-results__stat-number",children:p.autoGraded}),(0,u.jsx)("span",{className:"exam-results__stat-label",children:"Auto-corrigÃ©es"})]})]})]}),(0,u.jsxs)("div",{className:"exam-results__details",children:[(0,u.jsx)("h2",{className:"exam-results__details-title",children:"DÃ©tails par question"}),j.map((s,e)=>{const a=(0,o._Y)(s.question.type);return(0,u.jsxs)("div",{className:"card exam-results__item exam-results__item--".concat(s.status),children:[(0,u.jsxs)("div",{className:"exam-results__item-header",children:[(0,u.jsx)("span",{className:"exam-results__item-number",children:s.question._displayNumber||"Q".concat(e+1)}),(0,u.jsxs)("span",{className:"exam-results__item-type",children:[a.icon," ",a.label]}),(0,u.jsx)(x,{status:s.status}),s.result.maxPoints>0&&(0,u.jsxs)("span",{className:"exam-results__item-points",children:[s.result.awarded,"/",s.result.maxPoints," pt",1!==s.result.maxPoints?"s":""]})]}),(0,u.jsx)("div",{className:"exam-results__item-question",children:(0,u.jsx)(n.A,{text:s.question._displayText||s.question.question})}),s.question.has_figure&&s.question.figure_description&&(0,u.jsx)(l.A,{description:s.question.figure_description,compact:!0}),s.userAnswer&&(0,u.jsxs)("div",{className:"exam-results__item-answer",children:[(0,u.jsx)("strong",{children:"Votre rÃ©ponse :"})," ","scaffold-complete"===s.status||s.userAnswer.startsWith("{")&&s.userAnswer.includes('"scaffold"')?(0,u.jsx)(d,{answer:s.userAnswer,blanks:s.question.scaffold_blanks}):"multiple_choice"===s.question.type&&s.question.options?"".concat(s.userAnswer.toUpperCase(),") ").concat(s.question.options[s.userAnswer]||s.userAnswer):(0,u.jsx)(m,{answer:s.userAnswer,correctAnswer:s.question.correct})]}),s.question.correct&&(0,u.jsxs)("div",{className:"exam-results__item-correct",children:[(0,u.jsx)("strong",{children:"RÃ©ponse correcte :"})," ","multiple_choice"===s.question.type&&s.question.options?"".concat(s.question.correct.toUpperCase(),") ").concat(s.question.options[s.question.correct]||s.question.correct):String(s.question.correct)]}),s.question.explanation&&(0,u.jsxs)("div",{className:"exam-results__item-explanation",children:["ğŸ’¡ ",s.question.explanation]})]},e)})]}),(0,u.jsxs)("div",{className:"exam-results__actions",children:[(0,u.jsx)("button",{className:"button button--primary",onClick:()=>e("/exams/".concat(s)),children:"ğŸ”„ Recommencer cet examen"}),(0,u.jsx)("button",{className:"button button--ghost",onClick:()=>e("/exams"),children:"ğŸ“ Choisir un autre examen"})]})]})})}}}]);