(()=>{"use strict";var e,t,a,r,n,s={6632:(e,t,a)=>{var r=a(6540),n=a(5338),s=a(4976),o=a(7767),i=a(2360),l=a(3064),c=a(8062),d=a(7016),u=a(4848);function h(e){let{onClose:t}=e;const a=(0,c.A)(e=>e.activeTab),[n,s]=(0,r.useState)(a||"signin"),[o,i]=(0,r.useState)(""),[l,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[x,j]=(0,r.useState)(!1),v=(0,r.useRef)(null),w=(0,c.A)(e=>e.setUser);return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t]),(0,r.useEffect)(()=>{var e;null===(e=v.current)||void 0===e||e.focus()},[]),(0,u.jsx)("div",{className:"modal-overlay",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"auth-modal-title",children:(0,u.jsxs)("div",{className:"auth-modal",onClick:e=>e.stopPropagation(),ref:v,tabIndex:-1,children:[(0,u.jsxs)("div",{className:"auth-modal__header",children:[(0,u.jsx)("h2",{id:"auth-modal-title",className:"auth-modal__title",children:"Welcome to EdLight"}),(0,u.jsx)("button",{className:"auth-modal__close",onClick:t,"aria-label":"Close dialog",children:"×"})]}),(0,u.jsxs)("div",{className:"auth-modal__tabs",children:[(0,u.jsx)("button",{className:["auth-modal__tab","signin"===n?"auth-modal__tab--active":""].join(" "),onClick:()=>s("signin"),type:"button",children:"Sign In"}),(0,u.jsx)("button",{className:["auth-modal__tab","signup"===n?"auth-modal__tab--active":""].join(" "),onClick:()=>s("signup"),type:"button",children:"Create Account"})]}),(0,u.jsx)("div",{style:{display:"grid",gap:"0.5rem",marginBottom:"0.75rem"},children:(0,u.jsxs)("button",{type:"button",className:"button button--secondary button--pill",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},onClick:async()=>{b(""),y(""),j(!0);try{const e=await async function(){try{var e;const t=await(0,d.G6)(),a=t.user,r=(null===(e=t._tokenResponse)||void 0===e?void 0:e.isNewUser)||!1;return await(0,d.aI)(a,r),{uid:a.uid,name:a.displayName||"Student",email:a.email||"",picture:a.photoURL||""}}catch(e){throw new Error(e.message)}}();w(e),y("Successfully signed in with Google!"),setTimeout(()=>{t()},1e3)}catch(e){e.message&&e.message.includes("popup-closed-by-user")||e.message&&e.message.includes("cancelled-popup-request")||b(e.message||"Failed to sign in with Google")}finally{j(!1)}},disabled:x,children:[(0,u.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 48 48","aria-hidden":"true",children:[(0,u.jsx)("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),(0,u.jsx)("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),(0,u.jsx)("path",{fill:"#FBBC05",d:"M10.53 28.59a14.5 14.5 0 0 1 0-9.18l-7.98-6.19a24.02 24.02 0 0 0 0 21.56l7.98-6.19z"}),(0,u.jsx)("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]}),"Continue with Google"]})}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b(""),y(""),j(!0),!o||!l)return b("Please fill in all fields"),void j(!1);if("signup"===n&&!m)return b("Please enter your name"),void j(!1);try{let e;e="signin"===n?await async function(e,t){try{const a=(await(0,d.Jv)(e,t)).user;return await(0,d.aI)(a,!1),{uid:a.uid,name:a.displayName||"Student",email:a.email||"",picture:a.photoURL||""}}catch(e){throw new Error(e.message)}}(o,l):await async function(e,t,a){try{const r=(await(0,d.Hh)(e,t,a)).user;return await(0,d.aI)(r,!0),{uid:r.uid,name:a||r.displayName||"Student",email:r.email||"",picture:r.photoURL||""}}catch(e){throw new Error(e.message)}}(o,l,m),w(e),y("signin"===n?"Successfully logged in!":"Account created successfully!"),setTimeout(()=>{t()},1e3)}catch(e){let t=e.message;t.includes("auth/invalid-email")?t="Invalid email address":t.includes("auth/user-not-found")?t="No account found with this email":t.includes("auth/wrong-password")?t="Incorrect password":t.includes("auth/weak-password")?t="Password should be at least 6 characters":t.includes("auth/email-already-in-use")?t="An account with this email already exists":t.includes("auth/invalid-credential")&&(t="Invalid email or password"),b(t)}finally{j(!1)}},children:["signup"===n&&(0,u.jsxs)("div",{className:"form-field",children:[(0,u.jsx)("label",{className:"form-label",htmlFor:"auth-name",children:"Full Name"}),(0,u.jsx)("input",{id:"auth-name",type:"text",className:"form-input",value:m,onChange:e=>p(e.target.value),placeholder:"Enter your full name"})]}),(0,u.jsxs)("div",{className:"form-field",children:[(0,u.jsx)("label",{className:"form-label",htmlFor:"auth-email",children:"Email Address"}),(0,u.jsx)("input",{id:"auth-email",type:"email",className:"form-input",value:o,onChange:e=>i(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,u.jsxs)("div",{className:"form-field",children:[(0,u.jsx)("label",{className:"form-label",htmlFor:"auth-password",children:"Password"}),(0,u.jsx)("input",{id:"auth-password",type:"password",className:"form-input",value:l,onChange:e=>h(e.target.value),placeholder:"Enter your password",required:!0})]}),g&&(0,u.jsx)("div",{className:"form-message form-message--error",children:g}),f&&(0,u.jsx)("div",{className:"form-message form-message--success",children:f}),(0,u.jsx)("button",{type:"submit",className:"button button--primary button--pill",style:{width:"100%",marginTop:"0.75rem"},disabled:x,children:x?"Please wait...":"signin"===n?"Sign In":"Create Account"})]}),(0,u.jsx)("p",{className:"form-footnote",children:"signin"===n?(0,u.jsxs)(u.Fragment,{children:["Don't have an account? ",(0,u.jsx)("button",{type:"button",className:"form-footnote__link",onClick:()=>s("signup"),children:"Sign up now!"})]}):(0,u.jsxs)(u.Fragment,{children:["Already have an account? ",(0,u.jsx)("button",{type:"button",className:"form-footnote__link",onClick:()=>s("signin"),children:"Sign in instead!"})]})})]})})}function m(e){let{user:t,onLogout:a}=e;return(0,u.jsxs)("div",{className:"dropdown__menu",children:[(0,u.jsxs)("div",{className:"dropdown__item dropdown__item--muted",children:[(0,u.jsx)("strong",{children:t.name}),(0,u.jsx)("span",{className:"text-muted",style:{fontSize:"0.85rem"},children:t.email})]}),(0,u.jsx)("div",{className:"dropdown__divider"}),(0,u.jsx)("button",{className:"dropdown__item",onClick:a,children:"Sign Out"})]})}function p(){const e=(0,o.Zp)(),{pathname:t}=(0,o.zy)(),a=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1),{isAuthenticated:l,user:h,showUserDropdown:p,toggleUserDropdown:g,logout:b}=(0,c.A)();(0,r.useEffect)(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&c.A.getState().setShowUserDropdown(!1)};if(p)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[p]);const f=e=>"/"===e?"/"===t:t.startsWith(e);return(0,u.jsx)("header",{className:"navbar",children:(0,u.jsxs)("div",{className:"container navbar__inner",children:[(0,u.jsxs)(s.N_,{to:"/",className:"logo",children:[(0,u.jsx)("img",{src:"/assets/logo.png",alt:"EdLight Academy",className:"logo__image"}),(0,u.jsx)("span",{className:"logo__text",children:"EdLight Academy"})]}),(0,u.jsx)("button",{className:"mobile-menu-toggle",onClick:()=>i(!n),"aria-label":"Toggle menu",children:n?(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,u.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,u.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,u.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,u.jsxs)("nav",{className:"nav-links ".concat(n?"nav-links--mobile-open":""),children:[(0,u.jsx)(s.N_,{to:"/courses",className:["nav-link",f("/courses")?"active":""].join(" "),onClick:()=>i(!1),children:"Cours"}),(0,u.jsx)(s.N_,{to:"/quizzes",className:["nav-link",f("/quizzes")?"active":""].join(" "),onClick:()=>i(!1),children:"Quiz"}),(0,u.jsx)(s.N_,{to:"/exams",className:["nav-link",f("/exams")?"active":""].join(" "),onClick:()=>i(!1),children:"Examens"}),(0,u.jsx)(s.N_,{to:"/about",className:["nav-link",f("/about")?"active":""].join(" "),onClick:()=>i(!1),children:"À propos"}),l?(0,u.jsx)(s.N_,{to:"/dashboard",className:"nav-link nav-link--mobile-only",onClick:()=>i(!1),children:"Tableau de bord"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"nav-link nav-link--mobile-only nav-link--button",onClick:()=>{c.A.getState().toggleAuthModal(),i(!1)},children:"Se connecter"}),(0,u.jsx)("button",{className:"nav-link nav-link--mobile-only nav-link--button nav-link--primary",onClick:()=>{c.A.getState().toggleAuthModal(),c.A.getState().setActiveTab("signup"),i(!1)},children:"Créer un compte"})]})]}),n&&(0,u.jsx)("div",{className:"mobile-menu-backdrop mobile-menu-backdrop--visible",onClick:()=>i(!1)}),(0,u.jsx)("div",{className:"nav-actions",children:l?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"button button--ghost button--pill nav-actions__dashboard",onClick:()=>e("/dashboard"),children:"Tableau de bord"}),(0,u.jsxs)("div",{className:"dropdown",ref:a,children:[(0,u.jsx)("button",{className:"avatar",onClick:()=>g(),"aria-haspopup":"true","aria-expanded":p,children:h.name.split(" ").map(e=>e[0]).join("")}),p&&(0,u.jsx)(m,{user:h,onLogout:async()=>{try{await async function(){try{await(0,d.ri)()}catch(e){throw new Error(e.message)}}()}catch(e){}b(),e("/")}})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"button button--ghost button--pill nav-actions__signin",onClick:()=>c.A.getState().toggleAuthModal(),children:"Se connecter"}),(0,u.jsx)("button",{className:"button button--primary button--pill nav-actions__signup",onClick:()=>{c.A.getState().toggleAuthModal(),c.A.getState().setActiveTab("signup")},children:"Créer un compte"})]})})]})})}function g(){const{showAuthModal:e,toggleAuthModal:t}=(0,c.A)();return(0,u.jsxs)("div",{className:"app-shell",children:[(0,u.jsx)("a",{href:"#main-content",className:"skip-to-content",children:"Skip to content"}),(0,u.jsx)(p,{}),(0,u.jsx)("main",{id:"main-content",className:"app-shell__main",children:(0,u.jsx)(o.sv,{})}),e&&(0,u.jsx)(h,{onClose:()=>t()})]})}class b extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("[ErrorBoundary]",e,null==t?void 0:t.componentStack)}render(){return this.state.hasError?(0,u.jsxs)("div",{className:"container",style:{padding:"4rem 1rem",textAlign:"center"},children:[(0,u.jsx)("h2",{children:"Something went wrong"}),(0,u.jsx)("p",{className:"text-muted",style:{marginTop:"0.5rem"},children:"An unexpected error occurred. Please try refreshing the page."}),(0,u.jsx)("button",{className:"button button--primary button--pill",style:{marginTop:"1rem"},onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},children:"Refresh Page"}),!1]}):this.props.children}}var f=a(4589);function y(e){let{children:t}=e;const{isAuthenticated:a,user:n}=(0,c.A)(),[s,i]=(0,r.useState)(!0),[l,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{a&&null!=n&&n.uid?(async()=>{try{const e=await(0,f.x7)((0,f.H9)(d.db,"users",n.uid));e.exists()&&"admin"===e.data().role&&h(!0)}catch(e){console.error("Admin check failed:",e)}finally{i(!1)}})():i(!1)},[a,null==n?void 0:n.uid]),s?(0,u.jsx)("div",{className:"container",style:{display:"grid",placeItems:"center",minHeight:"60vh"},children:(0,u.jsx)("div",{className:"loading-spinner"})}):a?l?t:(0,u.jsxs)("div",{className:"container",style:{padding:"4rem 1rem",textAlign:"center"},children:[(0,u.jsx)("h2",{children:"Access Denied"}),(0,u.jsx)("p",{className:"text-muted",style:{marginTop:"0.5rem"},children:"You don't have permission to view this page."})]}):(0,u.jsx)(o.C5,{to:"/",replace:!0})}const x=r.lazy(()=>a.e(730).then(a.bind(a,1730))),j=r.lazy(()=>Promise.all([a.e(444),a.e(871),a.e(703)]).then(a.bind(a,6703))),v=r.lazy(()=>Promise.all([a.e(444),a.e(871),a.e(851),a.e(148)]).then(a.bind(a,148))),w=r.lazy(()=>Promise.all([a.e(444),a.e(871),a.e(851),a.e(55)]).then(a.bind(a,9055))),N=r.lazy(()=>Promise.all([a.e(444),a.e(871),a.e(4)]).then(a.bind(a,1004))),_=r.lazy(()=>a.e(472).then(a.bind(a,5472))),C=r.lazy(()=>a.e(983).then(a.bind(a,5983))),k=r.lazy(()=>a.e(975).then(a.bind(a,975))),A=r.lazy(()=>a.e(498).then(a.bind(a,8498))),O=r.lazy(()=>a.e(127).then(a.bind(a,9127))),S=r.lazy(()=>a.e(78).then(a.bind(a,4078))),E=r.lazy(()=>a.e(889).then(a.bind(a,2889))),P=r.lazy(()=>a.e(691).then(a.bind(a,4691))),z=r.lazy(()=>Promise.all([a.e(444),a.e(920),a.e(972)]).then(a.bind(a,4972))),q=r.lazy(()=>Promise.all([a.e(444),a.e(676),a.e(920),a.e(235),a.e(11)]).then(a.bind(a,6011))),I=r.lazy(()=>Promise.all([a.e(676),a.e(920),a.e(235),a.e(850)]).then(a.bind(a,6850))),D=new i.E({defaultOptions:{queries:{staleTime:3e5,cacheTime:18e5}}});function F(){return(0,u.jsx)(b,{children:(0,u.jsx)(l.Ht,{client:D,children:(0,u.jsx)(s.Kd,{children:(0,u.jsx)(r.Suspense,{fallback:(0,u.jsx)("div",{className:"suspense-fallback",children:(0,u.jsx)("div",{className:"loading-spinner"})}),children:(0,u.jsx)(o.BV,{children:(0,u.jsxs)(o.qh,{path:"/",element:(0,u.jsx)(g,{}),children:[(0,u.jsx)(o.qh,{index:!0,element:(0,u.jsx)(x,{})}),(0,u.jsx)(o.qh,{path:"courses",element:(0,u.jsx)(j,{})}),(0,u.jsx)(o.qh,{path:"courses/:courseId",element:(0,u.jsx)(v,{})}),(0,u.jsx)(o.qh,{path:"dashboard",element:(0,u.jsx)(w,{})}),(0,u.jsx)(o.qh,{path:"quizzes",element:(0,u.jsx)(N,{})}),(0,u.jsx)(o.qh,{path:"about",element:(0,u.jsx)(_,{})}),(0,u.jsx)(o.qh,{path:"contact",element:(0,u.jsx)(C,{})}),(0,u.jsx)(o.qh,{path:"faq",element:(0,u.jsx)(k,{})}),(0,u.jsx)(o.qh,{path:"help",element:(0,u.jsx)(A,{})}),(0,u.jsx)(o.qh,{path:"privacy",element:(0,u.jsx)(O,{})}),(0,u.jsx)(o.qh,{path:"terms",element:(0,u.jsx)(S,{})}),(0,u.jsx)(o.qh,{path:"admin",element:(0,u.jsx)(y,{children:(0,u.jsx)(E,{})})}),(0,u.jsx)(o.qh,{path:"admin/courses",element:(0,u.jsx)(y,{children:(0,u.jsx)(P,{})})}),(0,u.jsx)(o.qh,{path:"exams",element:(0,u.jsx)(z,{})}),(0,u.jsx)(o.qh,{path:"exams/:examIndex",element:(0,u.jsx)(q,{})}),(0,u.jsx)(o.qh,{path:"exams/:examIndex/results",element:(0,u.jsx)(I,{})})]})})})})})})}var M=a(2635),T=a(2389);M.Ay.use(T.r9).init({resources:{en:{translation:{common:{loading:"Loading...",error:"An error occurred",close:"Close",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",next:"Next",previous:"Previous",search:"Search",all:"All",none:"None",required:"Required"},auth:{signIn:"Sign In",signUp:"Sign Up",signOut:"Sign Out",email:"Email",password:"Password",fullName:"Full Name",forgotPassword:"Forgot Password?",noAccount:"Don't have an account?",hasAccount:"Already have an account?"},courses:{catalog:"Course Catalog",myCourses:"My Courses",start:"Start",continue:"Continue",preview:"Preview",enroll:"Enroll",enrolled:"Enrolled",progress:"Progress",completed:"Completed",modules:"Modules",duration:"Duration",instructor:"Instructor",students:"Students",rating:"Rating"},quizzes:{start:"Start Quiz",check:"Check Answer",correct:"Correct!",incorrect:"Incorrect, try again",hint:"Hint",explanation:"Explanation",tryAgain:"Try Again",submit:"Submit",score:"Score"}}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}}),n.createRoot(document.getElementById("root")).render((0,u.jsx)(r.StrictMode,{children:(0,u.jsx)(F,{})})),setTimeout(()=>{const e=c.A.getState();e.hydrated?e.isAuthenticated!==!!e.user&&c.A.setState({isAuthenticated:!!e.user}):c.A.setState({hydrated:!0,isAuthenticated:!!e.user})},0),(0,d.Bh)(async e=>{const t=c.A.getState().setUser;if(e){try{await(0,d.aI)(e,!1)}catch(e){console.error("Failed to update user document:",e)}t({uid:e.uid,name:e.displayName||"Student",email:e.email||"",picture:e.photoURL||""})}else c.A.getState().logout()})},7016:(e,t,a)=>{a.d(t,{BC:()=>A,Oe:()=>O,db:()=>m,EI:()=>C,HW:()=>j,ri:()=>y,Bh:()=>x,MD:()=>N,Jv:()=>g,G6:()=>f,Hh:()=>b,kH:()=>S,IE:()=>E,pm:()=>_,TK:()=>k,h5:()=>w,aI:()=>v});var r=a(4705),n=a(223),s=a(9993),o=a(4589);const i="undefined"!=typeof window&&window.EDLIGHT_FIREBASE_CONFIG||{},l={apiKey:i.apiKey||"",authDomain:i.authDomain||"",projectId:i.projectId||"",storageBucket:i.storageBucket||"",messagingSenderId:i.messagingSenderId||"",appId:i.appId||""};function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const u=(0,n.Wp)(l),h=(0,s.xI)(u),m=(0,o.aU)(u),p=new s.HF;async function g(e,t){try{return await(0,s.x9)(h,e,t)}catch(e){throw e}}async function b(e,t,a){try{const r=await(0,s.eJ)(h,e,t),n=r.user;return a&&await(0,s.r7)(n,{displayName:a}),r}catch(e){throw e}}async function f(){try{return await(0,s.df)(h,p)}catch(e){throw console.error("[Firebase] Sign-in error:",e.code,e.message),e}}async function y(){try{await(0,s.CI)(h)}catch(e){throw e}}function x(e){return(0,s.hg)(h,e)}function j(){return h.currentUser}async function v(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const a=(0,o.H9)(m,"users",e.uid);t?await(0,o.BN)(a,{created_at:(0,o.O5)(),email:e.email||"",enrollment:"",full_name:e.displayName||"",last_seen:(0,o.O5)(),onboarding_completed:!1,profile_picture:e.photoURL||""}):(await(0,o.x7)(a)).exists()?await(0,o.BN)(a,{last_seen:(0,o.O5)(),email:e.email||"",full_name:e.displayName||"",profile_picture:e.photoURL||""},{merge:!0}):await(0,o.BN)(a,{created_at:(0,o.O5)(),email:e.email||"",enrollment:"",full_name:e.displayName||"",last_seen:(0,o.O5)(),onboarding_completed:!1,profile_picture:e.photoURL||""})}catch(e){throw console.error("Error upserting user document:",e),e}}async function w(e,t){try{const a=(0,o.H9)(m,"videos",e);return await(0,o.BN)(a,d(d({},t),{},{updated_at:(0,o.O5)()}),{merge:!0}),{success:!0}}catch(e){throw console.error("[Firebase] Error updating video:",e),e}}async function N(e,t,a){try{const r=(0,o.H9)(m,"courses",e),n=await(0,o.x7)(r);if(!n.exists())throw new Error("Course ".concat(e," not found"));const s=n.data(),i=(s.units||[]).map(e=>e.unitId===t||e.id===t?d(d({},e),{},{lessons:(e.lessons||[]).filter(e=>e.lessonId!==a)}):e);return await(0,o.BN)(r,d(d({},s),{},{units:i,updated_at:(0,o.O5)()})),{success:!0,message:"Lesson removed from ".concat(e)}}catch(e){throw console.error("[Firebase] Error removing lesson:",e),e}}async function _(e,t){try{const a=(0,o.H9)(m,"quizzes",e);return await(0,o.BN)(a,d(d({},t),{},{updated_at:(0,o.O5)()}),{merge:!0}),{success:!0}}catch(e){throw console.error("[Firebase] Error updating quiz:",e),e}}async function C(){try{const e=(0,o.rJ)(m,"quizzes"),t=await(0,o.GG)(e);if(t.empty)return{success:!0,deleted:0};const a=[];t.forEach(e=>a.push(e));let r=0;for(;a.length>0;){const e=(0,o.wP)(m),t=a.splice(0,400);for(const a of t)e.delete((0,o.H9)(m,"quizzes",a.id));await e.commit(),r+=t.length}return{success:!0,deleted:r}}catch(e){throw console.error("[Firebase] Error deleting all quizzes:",e),e}}async function k(e,t){try{const a=(0,o.H9)(m,"users",e);return await(0,o.BN)(a,d(d({},t),{},{updated_at:(0,o.O5)()}),{merge:!0}),{success:!0}}catch(e){throw console.error("[Firebase] Error updating user:",e),e}}async function A(e,t,a){try{var r;const n=(0,o.rJ)(m,"comments"),s={threadKey:e,text:t.trim(),authorId:a.uid,authorName:a.displayName||(null===(r=a.email)||void 0===r?void 0:r.split("@")[0])||"Student",authorEmail:a.email,created_at:(0,o.O5)(),updated_at:(0,o.O5)(),replyCount:0,likes:0};return d(d({id:(await(0,o.gS)(n,s)).id},s),{},{created_at:Date.now(),updated_at:Date.now()})}catch(e){throw console.error("[Firebase] Error adding comment:",e),e}}async function O(e,t,a){try{var r;const n=(0,o.rJ)(m,"comments",e,"replies"),s={text:t.trim(),authorId:a.uid,authorName:a.displayName||(null===(r=a.email)||void 0===r?void 0:r.split("@")[0])||"Student",authorEmail:a.email,created_at:(0,o.O5)(),updated_at:(0,o.O5)()},i=await(0,o.gS)(n,s),l=(0,o.H9)(m,"comments",e);return await(0,o.mZ)(l,{replyCount:(0,o.GV)(1),updated_at:(0,o.O5)()}),d(d({id:i.id},s),{},{created_at:Date.now(),updated_at:Date.now()})}catch(e){throw console.error("[Firebase] Error adding reply:",e),e}}function S(e,t){try{const a=(0,o.rJ)(m,"comments"),r=(0,o.P)(a,(0,o._M)("threadKey","==",e),(0,o.My)("created_at","desc"));return(0,o.aQ)(r,e=>{const a=[];e.forEach(e=>{a.push(d({id:e.id},e.data()))}),t(a)},e=>{console.error("[Firebase] Error in comments subscription:",e),t([])})}catch(e){return console.error("[Firebase] Error subscribing to comments:",e),()=>{}}}function E(e,t){try{const a=(0,o.rJ)(m,"comments",e,"replies"),r=(0,o.P)(a,(0,o.My)("created_at","asc"));return(0,o.aQ)(r,e=>{const a=[];e.forEach(e=>{a.push(d({id:e.id},e.data()))}),t(a)},e=>{console.error("[Firebase] Error in replies subscription:",e),t([])})}catch(e){return console.error("[Firebase] Error subscribing to replies:",e),()=>{}}}p.setCustomParameters({prompt:"select_account"})},8062:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(4705),n=a(1621),s=a(7134);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){(0,r.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const l=(0,n.vt)((0,s.Zr)((e,t)=>({user:null,isAuthenticated:!1,language:"en",hydrated:!1,enrolledCourses:[],progress:{},quizAttempts:{},currentCourse:null,showAuthModal:!1,showUserDropdown:!1,showCourseModal:!1,activeTab:"signin",setUser:t=>e({user:t,isAuthenticated:!!t}),setLanguage:t=>e({language:t}),enrollInCourse:t=>e(e=>e.enrolledCourses.some(e=>e.id===t.id)?e:{enrolledCourses:[...e.enrolledCourses,t]}),updateProgress:(t,a)=>e(e=>({progress:i(i({},e.progress),{},{[t]:i(i({},e.progress[t]),a)})})),recordQuizAttempt:(t,a)=>e(e=>({quizAttempts:i(i({},e.quizAttempts),{},{[t]:[...e.quizAttempts[t]||[],a]})})),setCurrentCourse:t=>e({currentCourse:t}),toggleAuthModal:()=>e(e=>({showAuthModal:!e.showAuthModal})),toggleUserDropdown:()=>e(e=>({showUserDropdown:!e.showUserDropdown})),setShowUserDropdown:t=>e({showUserDropdown:t}),toggleCourseModal:()=>e(e=>({showCourseModal:!e.showCourseModal})),setActiveTab:t=>e({activeTab:t}),logout:()=>e({user:null,isAuthenticated:!1,currentCourse:null,enrolledCourses:[],progress:{},quizAttempts:{},showUserDropdown:!1,showAuthModal:!1,showCourseModal:!1})}),{name:"edlight-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,language:e.language,enrolledCourses:e.enrolledCourses,progress:e.progress,quizAttempts:e.quizAttempts,hydrated:e.hydrated})}))}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return s[e].call(a.exports,a,a.exports,i),a.exports}i.m=s,e=[],i.O=(t,a,r,n)=>{if(!a){var s=1/0;for(d=0;d<e.length;d++){for(var[a,r,n]=e[d],o=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(i.O).every(e=>i.O[e](a[l]))?a.splice(l--,1):(o=!1,n<s&&(s=n));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,r,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);i.r(n);var s={};t=t||[null,a({}),a([]),a(a)];for(var o=2&r&&e;("object"==typeof o||"function"==typeof o)&&!~t.indexOf(o);o=a(o))Object.getOwnPropertyNames(o).forEach(t=>s[t]=()=>e[t]);return s.default=()=>e,i.d(n,s),n},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,a)=>(i.f[a](e,t),t),[])),i.u=e=>"js/"+e+"."+{4:"cae16aad9eb052a94978",11:"bd0ef1d0818fffd46a8d",55:"893458cf5c3bb8a8ffcc",78:"c5e4176b12a4c147215d",127:"83191141c25772208db1",130:"4c3c78c8f7b2799429fa",148:"0aa9e02e7de33941e6d3",235:"a995a254bd65c092adf5",444:"7f845b687cbb5b1cd23d",472:"ad9481fd4f4cc82e0657",498:"57fa07577d3eec61aef7",676:"135ad41ffccad9792402",691:"c7abdd633c6cef8476fa",703:"88db3ce46ec227a626d2",730:"323891314ddf963bec05",850:"82609c357be7938cb947",851:"d5ee046bdb0d2bf497f3",871:"0aa2617a0793a52a95f7",889:"074c6c4ebea2b248ce4d",920:"e77a685cf285ad16f36d",959:"31842b720ab3436e312e",972:"6cacd5c6f1228736cb81",975:"8a2638e85fd09b3d3cc1",983:"9c7065d6254734bf71d1"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="edlight-academy:",i.l=(e,t,a,s)=>{if(r[e])r[e].push(t);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",n+a),o.src=e),r[e]=[t];var h=(t,a)=>{o.onerror=o.onload=null,clearTimeout(m);var n=r[e];if(delete r[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(a)),t)return t(a)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",(()=>{var e={792:0};i.f.j=(t,a)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var n=new Promise((a,n)=>r=e[t]=[a,n]);a.push(r[2]=n);var s=i.p+i.u(t),o=new Error;i.l(s,a=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}},"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[s,o,l]=a,c=0;if(s.some(t=>0!==e[t])){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var d=l(i)}for(t&&t(a);c<s.length;c++)n=s[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},a=self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=i.O(void 0,[433],()=>i(6632));l=i.O(l)})();