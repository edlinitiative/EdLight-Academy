"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[806],{5806:(e,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(4705),n=a(6540),l=a(7767),i=a(1444),r=a(7028),c=a(3212),o=a(7791),d=a(4848);const u=[{id:"basic",label:"OpÃ©rations",symbols:[{display:"+",insert:"+",title:"Addition"},{display:"âˆ’",insert:"-",title:"Soustraction"},{display:"Ã—",insert:"\\times ",title:"Multiplication"},{display:"Ã·",insert:"\\div ",title:"Division"},{display:"=",insert:"=",title:"Ã‰gal"},{display:"â‰ ",insert:"\\neq ",title:"DiffÃ©rent"},{display:"Â±",insert:"\\pm ",title:"Plus ou moins"}]},{id:"fractions",label:"Fractions",symbols:[{display:"â–«/â–«",insert:"\\frac{â–«}{â–«}",title:"Fraction",cursor:6},{display:"Ë£/áµ§",insert:"\\frac{â–«}{â–«}",title:"Fraction",cursor:6}]},{id:"powers",label:"Puissances",symbols:[{display:"xÂ²",insert:"^{2}",title:"Au carrÃ©"},{display:"xâ¿",insert:"^{â–«}",title:"Puissance",cursor:2},{display:"âˆš",insert:"\\sqrt{â–«}",title:"Racine carrÃ©e",cursor:6},{display:"â¿âˆš",insert:"\\sqrt[â–«]{â–«}",title:"Racine n-iÃ¨me",cursor:6},{display:"xâ‚",insert:"_{â–«}",title:"Indice",cursor:2}]},{id:"comparisons",label:"Comparaisons",symbols:[{display:"<",insert:"<",title:"InfÃ©rieur"},{display:">",insert:">",title:"SupÃ©rieur"},{display:"â‰¤",insert:"\\leq ",title:"InfÃ©rieur ou Ã©gal"},{display:"â‰¥",insert:"\\geq ",title:"SupÃ©rieur ou Ã©gal"},{display:"â‰ˆ",insert:"\\approx ",title:"Environ Ã©gal"}]},{id:"greek",label:"Lettres",symbols:[{display:"Î±",insert:"\\alpha ",title:"Alpha"},{display:"Î²",insert:"\\beta ",title:"Beta"},{display:"Î³",insert:"\\gamma ",title:"Gamma"},{display:"Î´",insert:"\\delta ",title:"Delta"},{display:"Ï€",insert:"\\pi ",title:"Pi"},{display:"Ïƒ",insert:"\\sigma ",title:"Sigma"},{display:"Î¸",insert:"\\theta ",title:"Theta"},{display:"Î»",insert:"\\lambda ",title:"Lambda"},{display:"Î¼",insert:"\\mu ",title:"Mu"},{display:"âˆ",insert:"\\infty ",title:"Infini"}]},{id:"sets",label:"Ensembles",symbols:[{display:"âˆˆ",insert:"\\in ",title:"Appartient"},{display:"âˆ‰",insert:"\\notin ",title:"N'appartient pas"},{display:"âŠ‚",insert:"\\subset ",title:"Sous-ensemble"},{display:"âˆª",insert:"\\cup ",title:"Union"},{display:"âˆ©",insert:"\\cap ",title:"Intersection"},{display:"â„",insert:"\\mathbb{R}",title:"RÃ©els"},{display:"â„•",insert:"\\mathbb{N}",title:"Naturels"},{display:"â„¤",insert:"\\mathbb{Z}",title:"Entiers"}]},{id:"trig",label:"Fonctions",symbols:[{display:"sin",insert:"\\sin(â–«)",title:"Sinus",cursor:5},{display:"cos",insert:"\\cos(â–«)",title:"Cosinus",cursor:5},{display:"tan",insert:"\\tan(â–«)",title:"Tangente",cursor:5},{display:"ln",insert:"\\ln(â–«)",title:"Logarithme naturel",cursor:4},{display:"log",insert:"\\log(â–«)",title:"Logarithme",cursor:5},{display:"lim",insert:"\\lim_{â–«}",title:"Limite",cursor:5},{display:"âˆ‘",insert:"\\sum_{â–«}^{â–«}",title:"Somme",cursor:5},{display:"âˆ«",insert:"\\int_{â–«}^{â–«}",title:"IntÃ©grale",cursor:5}]},{id:"arrows",label:"FlÃ¨ches",symbols:[{display:"â†’",insert:"\\rightarrow ",title:"FlÃ¨che droite"},{display:"â†",insert:"\\leftarrow ",title:"FlÃ¨che gauche"},{display:"â‡’",insert:"\\Rightarrow ",title:"Implique"},{display:"â‡”",insert:"\\Leftrightarrow ",title:"Ã‰quivalent"}]},{id:"misc",label:"Divers",symbols:[{display:"()",insert:"(â–«)",title:"ParenthÃ¨ses",cursor:1},{display:"||",insert:"|â–«|",title:"Valeur absolue",cursor:1},{display:"â€¦",insert:"\\ldots ",title:"Points de suspension"},{display:"âˆ€",insert:"\\forall ",title:"Pour tout"},{display:"âˆƒ",insert:"\\exists ",title:"Il existe"}]}],m=(0,n.forwardRef)(function(e,s){let{value:a="",onChange:t,onFocus:l,onBlur:i,onKeyDown:r,placeholder:c="Votre rÃ©ponse",id:m,ariaLabel:h,disabled:x=!1,className:p="",compact:_=!1}=e;const v=(0,o.n7)(),f=(0,n.useRef)(null),[j,k]=(0,n.useState)(!1),[b,g]=(0,n.useState)("basic"),[N,y]=(0,n.useState)(!1),w=(0,n.useRef)(null);(0,n.useImperativeHandle)(s,()=>({focus:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.focus()}}),[]),(0,n.useEffect)(()=>{if(!j)return;const e=e=>{w.current&&!w.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[j]);const C=(0,n.useCallback)(()=>{y(!0),null==l||l()},[l]),q=(0,n.useCallback)(e=>{var s;null!==(s=w.current)&&void 0!==s&&s.contains(e.relatedTarget)||(y(!1),null==i||i())},[i]),S=(0,n.useCallback)(e=>{const s=f.current;if(!s)return;const n=e.insert,l=s.selectionStart||0,i=s.selectionEnd||0,r=a.slice(0,l),c=a.slice(i),o=n.indexOf("â–«");let d,u;o>=0?(d=r+n.replace("â–«","")+c,u=l+o):(d=r+n+c,u=l+n.length),t(d),requestAnimationFrame(()=>{s.focus(),s.setSelectionRange(u,u)})},[a,t]),A=a&&(/\\[a-zA-Z]/.test(a)||/\^|_|\{|\}/.test(a)),L=u.find(e=>e.id===b)||u[0],M=_?u.flatMap(e=>e.symbols).filter(e=>["\\frac{â–«}{â–«}","^{2}","\\sqrt{â–«}","\\pi ","\\times ","\\leq ","\\geq ","\\rightarrow ","\\alpha "].includes(e.insert)):null;return(0,d.jsxs)("div",{ref:w,className:"math-kb ".concat(N?"math-kb--focused":""," ").concat(j?"math-kb--toolbar-open":""," ").concat(p),children:[(0,d.jsxs)("div",{className:"math-kb__input-row",children:[(0,d.jsx)("input",{ref:f,id:m,className:"math-kb__input",type:"text",value:a,onChange:e=>t(e.target.value),onFocus:C,onBlur:q,onKeyDown:r,placeholder:c,autoComplete:"off",spellCheck:"false","aria-label":h||c,disabled:x}),(0,d.jsx)("button",{className:"math-kb__toggle ".concat(j?"math-kb__toggle--active":""),onClick:()=>{var e;k(e=>!e),null===(e=f.current)||void 0===e||e.focus()},type:"button",tabIndex:-1,"aria-label":j?"Masquer les symboles":"Afficher les symboles mathÃ©matiques",title:"Symboles mathÃ©matiques",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.745 3A23.933 23.933 0 003 12c0 3.183.62 6.22 1.745 9M19.5 3c.967 2.78 1.5 5.817 1.5 9s-.533 6.22-1.5 9M8.25 8.885l1.444 3.17a.5.5 0 00.91 0l1.444-3.17M8 15h4M16.5 8v7m-2-3.5h4"})})})]}),A&&v&&(0,d.jsx)("div",{className:"math-kb__preview",children:(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)("$".concat(a,"$"),v)})}),j&&(0,d.jsxs)("div",{className:"math-kb__toolbar",children:[!_&&(0,d.jsx)("div",{className:"math-kb__tabs",children:u.map(e=>(0,d.jsx)("button",{className:"math-kb__tab ".concat(b===e.id?"math-kb__tab--active":""),onClick:()=>g(e.id),type:"button",tabIndex:-1,children:e.label},e.id))}),(0,d.jsx)("div",{className:"math-kb__symbols",children:(_?M:L.symbols).map((e,s)=>(0,d.jsx)("button",{className:"math-kb__sym-btn",onClick:()=>S(e),title:e.title,type:"button",tabIndex:-1,children:e.display},"".concat(e.insert,"-").concat(s)))})]})]})});var h=a(9920);function x(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);s&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,t)}return a}function p(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?x(Object(a),!0).forEach(function(s){(0,t.A)(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function _(e,s){return e._displayNumber||String(s+1)}function v(e){let{text:s}=e;const a=(0,o.n7)();return s?/\$/.test(s)||/\\\(/.test(s)?(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(s,a)}):(0,d.jsx)(d.Fragment,{children:s}):null}const f=[{key:"simplify",re:/\b(simplifier|rÃ©duire|Ã©crire.*sous.*forme|mettre.*sous.*forme)\b/i,label:"Simplification",icon:"âœ¨",scaffoldSteps:[{hint:"Identifiez et simplifiez chaque terme sÃ©parÃ©ment"},{hint:"Combinez les termes semblables"},{hint:"Ã‰crivez le rÃ©sultat sous la forme demandÃ©e"}],askFinalAnswer:!0,finalLabel:"RÃ©sultat simplifiÃ©"},{key:"factor",re:/\b(factoriser)\b/i,label:"Factorisation",icon:"ğŸ”—",scaffoldSteps:[{hint:"Identifiez le facteur commun ou l'identitÃ© remarquable"},{hint:"Mettez en facteur"},{hint:"VÃ©rifiez en dÃ©veloppant"}],askFinalAnswer:!0,finalLabel:"Forme factorisÃ©e"},{key:"solve",re:/\b(rÃ©soudre|trouver.*solution|dÃ©terminer.*valeur|trouver.*valeur)\b/i,label:"RÃ©solution",icon:"ğŸ”",scaffoldSteps:[{hint:"Posez l'Ã©quation ou identifiez les donnÃ©es"},{hint:"Isolez l'inconnue Ã©tape par Ã©tape"},{hint:"VÃ©rifiez la / les solution(s)"}],askFinalAnswer:!0,finalLabel:"Solution(s)"},{key:"calculate",re:/\b(calculer|Ã©valuer|dÃ©terminer)\b/i,label:"Calcul",icon:"ğŸ§®",scaffoldSteps:[{hint:"Posez le calcul avec les donnÃ©es"},{hint:"Effectuez les opÃ©rations"}],askFinalAnswer:!0,finalLabel:"RÃ©sultat"},{key:"prove",re:/\b(montrer\s+que|dÃ©montrer|prouver\s+que|dÃ©duire\s+que|vÃ©rifier\s+que|justifier\s+que|en\s+dÃ©duire)\b/i,label:"DÃ©monstration",icon:"ğŸ“",scaffoldSteps:[{hint:"Partez de l'hypothÃ¨se ou de l'expression de dÃ©part"},{hint:"DÃ©veloppez le raisonnement"},{hint:"Concluez en retrouvant le rÃ©sultat demandÃ©"}],askFinalAnswer:!1,finalLabel:""},{key:"develop",re:/\b(dÃ©velopper|dÃ©velopper\s+et\s+rÃ©duire)\b/i,label:"DÃ©veloppement",icon:"ğŸ“–",scaffoldSteps:[{hint:"Appliquez la distributivitÃ© ou l'identitÃ© remarquable"},{hint:"RÃ©duisez les termes semblables"}],askFinalAnswer:!0,finalLabel:"Forme dÃ©veloppÃ©e"}],j={key:"generic",label:"Raisonnement",icon:"ğŸ’¡",scaffoldSteps:[{hint:"PremiÃ¨re Ã©tape de votre raisonnement"},{hint:"Continuezâ€¦"}],askFinalAnswer:!0,finalLabel:"RÃ©sultat final"},k=/\b(montrer\s+que|dÃ©montrer|prouver\s+que|dÃ©duire\s+que|vÃ©rifier\s+que|justifier\s+que|en\s+dÃ©duire|simplifier|factoriser|dÃ©velopper\s+et\s+rÃ©duire|calculer\s+et\s+simplifier|rÃ©soudre\s+(dans|l['']Ã©quation)|dÃ©terminer)\b/i;function b(e){const s=e._displayText||e.question||"",a=e.type||"";return!!["calculation","short_answer","essay"].includes(a)&&k.test(s)}const g=/_{4,}|\.{4,}/g;function N(e){let{title:s,instructions:a}=e;const[t,l]=(0,n.useState)(!1),i=!(null==a||!a.trim());return(0,d.jsxs)("div",{className:"exam-take__section-header",children:[(0,d.jsxs)("div",{className:"exam-take__section-header-top",onClick:()=>i&&l(e=>!e),role:i?"button":void 0,tabIndex:i?0:void 0,onKeyDown:e=>{!i||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l(e=>!e))},children:[(0,d.jsx)("h3",{children:s}),i&&(0,d.jsx)("button",{className:"exam-take__section-toggle",type:"button","aria-label":t?"Afficher les instructions":"Masquer les instructions",tabIndex:-1,children:t?"â–¶":"â–¼"})]}),i&&!t&&(0,d.jsx)(c.A,{text:a})]})}function y(e){let{text:s}=e;const[a,t]=(0,n.useState)(!0);return s?(0,d.jsxs)("div",{className:"exam-take__reading-passage ".concat(a?"":"exam-take__reading-passage--collapsed"),children:[(0,d.jsxs)("div",{className:"exam-take__reading-passage-bar",onClick:()=>t(e=>!e),children:[(0,d.jsx)("span",{className:"exam-take__reading-passage-icon",children:"ğŸ“–"}),(0,d.jsx)("span",{className:"exam-take__reading-passage-label",children:"Texte de rÃ©fÃ©rence"}),(0,d.jsx)("button",{className:"exam-take__reading-passage-toggle",type:"button","aria-label":a?"RÃ©duire le texte":"Afficher le texte",tabIndex:-1,children:a?"â–² RÃ©duire":"â–¼ Afficher le texte"})]}),a&&(0,d.jsx)("div",{className:"exam-take__reading-passage-body",children:(0,d.jsx)(c.A,{text:s})})]}):null}function w(e){let{text:s,index:a,value:t,onChange:l}=e;const i=s.split(g),r=i.length-1,c=r>1?(t||"").split("|").concat(Array(r).fill("")).slice(0,r):[t||""],o=/^\s*\(([^)]+)\)/;return(0,d.jsx)("div",{className:"exam-take__fill-blank-text",children:i.map((e,s)=>{let t="",i=e;if(s>0){const s=e.match(o);s&&(t=s[1],i=e.slice(s[0].length))}return(0,d.jsxs)(n.Fragment,{children:[s>0&&(0,d.jsxs)("span",{className:"exam-take__inline-blank-wrap",children:[t&&(0,d.jsx)("span",{className:"exam-take__inline-blank-hint",children:t}),(0,d.jsx)("input",{type:"text",className:"exam-take__inline-blank",value:c[s-1],onChange:e=>((e,s)=>{if(r<=1)l(a,s);else{const t=[...c];t[e]=s,l(a,t.join("|"))}})(s-1,e.target.value),placeholder:t||"â€¦",autoComplete:"off",spellCheck:"false",style:t?{minWidth:"".concat(Math.max(.6*t.length+2,5),"em")}:void 0})]}),i&&(0,d.jsx)("span",{children:(0,d.jsx)(v,{text:i})})]},s)})})}function C(e){let{hints:s}=e;const[a,t]=(0,n.useState)(0);if(!s||!Array.isArray(s)||0===s.length)return null;const l=a<s.length;return(0,d.jsxs)("div",{className:"qa-hints",children:[s.slice(0,a).map((e,s)=>(0,d.jsxs)("div",{className:"qa-hints__item",style:{animationDelay:"".concat(.05*s,"s")},children:[(0,d.jsx)("span",{className:"qa-hints__icon",children:"ğŸ’¡"}),(0,d.jsx)("span",{className:"qa-hints__text",children:(0,d.jsx)(v,{text:e})})]},s)),l&&(0,d.jsxs)("button",{type:"button",className:"qa-hints__btn",onClick:()=>t(e=>e+1),children:["ğŸ’¡ ",0===a?"Obtenir un indice":"Indice suivant"," ",(0,d.jsxs)("span",{className:"qa-hints__counter",children:["(",a,"/",s.length,")"]})]})]})}function q(e){let{question:s,index:a,value:t,onChange:l}=e;const i=s.scaffold_text,r=s.scaffold_blanks||[],c=s.answer_parts||[],o=c.length>0,[u,h]=n.useState({}),[x,p]=n.useState(!1),[_,f]=n.useState(!1),[j,k]=n.useState(null),b=(0,n.useRef)([]),g=(0,n.useMemo)(()=>{if(!t)return r.map(()=>"");try{const e=JSON.parse(t);if(e&&e.scaffold&&Array.isArray(e.scaffold))return r.map((s,a)=>e.scaffold[a]||"")}catch(e){}return r.map(()=>"")},[t,r]),N=(0,n.useCallback)(e=>{l(a,JSON.stringify({scaffold:e}))},[a,l]),y=(0,n.useCallback)((e,s)=>{const a=[...g];a[e]=s,x&&(p(!1),h({})),N(a)},[g,N,x]),w=(0,n.useCallback)(e=>(e||"").toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/^\$+|\$+$/g,"").replace(/\\text\{([^}]*)\}/g,"$1").replace(/\\,/g,"").replace(/\s+/g," ").trim(),[]),C=(0,n.useCallback)(()=>{if(!o)return;const e={};r.forEach((s,a)=>{const t=(g[a]||"").trim();if(!t)return void(e[a]=void 0);const n=c[a];if(!n)return void(e[a]=void 0);const l=[n.answer,...n.alternatives||[]],i=w(t);let r=!1;for(const e of l){const s=w(e);if(!s)continue;if(i===s){r=!0;break}const a=parseFloat(i.replace(/,/g,".")),t=parseFloat(s.replace(/,/g,"."));if(!isNaN(a)&&!isNaN(t)&&Math.abs(a-t)<=Math.max(.01*Math.abs(t),.01)){r=!0;break}}e[a]=r}),h(e),p(!0)},[o,c,g,r,w]),q=(0,n.useCallback)((e,s)=>{var a;"Enter"===e.key&&(e.preventDefault(),s<r.length-1?null===(a=b.current[s+1])||void 0===a||a.focus():C())},[r.length,C]),S=g.filter(e=>e.trim()).length,A=Object.values(u).filter(e=>!0===e).length,L=Object.values(u).filter(e=>!1===e).length,M=r.length;if(!i||0===M)return null;const I=i.search(/\{\{\d+\}\}/),P=I>0?i.slice(0,I).trim():"",z=x&&A===M,E=S===M;return(0,d.jsxs)("div",{className:"ka-scaffold ".concat(z?"ka-scaffold--complete":""),children:[(0,d.jsx)("div",{className:"ka-scaffold__dots",children:r.map((e,s)=>{var a;let t="ka-scaffold__dot";return!0===u[s]?t+=" ka-scaffold__dot--correct":!1===u[s]?t+=" ka-scaffold__dot--wrong":null!==(a=g[s])&&void 0!==a&&a.trim()&&(t+=" ka-scaffold__dot--filled"),j===s&&(t+=" ka-scaffold__dot--active"),(0,d.jsx)("button",{className:t,onClick:()=>{var e;return null===(e=b.current[s])||void 0===e?void 0:e.focus()},title:"Ã‰tape ".concat(s+1),type:"button","aria-label":"Aller Ã  l'Ã©tape ".concat(s+1)},s)})}),P&&(0,d.jsxs)("div",{className:"ka-scaffold__solution-wrap",children:[(0,d.jsxs)("button",{className:"ka-scaffold__solution-toggle ".concat(_?"ka-scaffold__solution-toggle--open":""),onClick:()=>f(e=>!e),type:"button",children:[(0,d.jsx)("svg",{className:"ka-scaffold__solution-icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),_?"Masquer la dÃ©marche":"Voir la dÃ©marche complÃ¨te",(0,d.jsx)("svg",{className:"ka-scaffold__chevron",viewBox:"0 0 20 20",width:"14",height:"14",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),_&&(0,d.jsx)("div",{className:"ka-scaffold__solution-body",children:P.split("\n").map((e,s)=>(0,d.jsxs)(n.Fragment,{children:[s>0&&(0,d.jsx)("br",{}),(0,d.jsx)(v,{text:e})]},s))})]}),(0,d.jsx)("div",{className:"ka-scaffold__steps",children:r.map((e,s)=>{var t;const n=u[s];let l="ka-scaffold__step";return!0===n?l+=" ka-scaffold__step--correct":!1===n?l+=" ka-scaffold__step--wrong":j===s?l+=" ka-scaffold__step--focused":null!==(t=g[s])&&void 0!==t&&t.trim()&&(l+=" ka-scaffold__step--filled"),(0,d.jsxs)("div",{className:l,children:[(0,d.jsx)("div",{className:"ka-scaffold__step-num",children:s+1}),(0,d.jsxs)("div",{className:"ka-scaffold__step-content",children:[e.label&&(0,d.jsx)("label",{className:"ka-scaffold__step-label",htmlFor:"scaffold-".concat(a,"-").concat(s),children:e.label}),(0,d.jsxs)("div",{className:"ka-scaffold__input-row",children:[(0,d.jsx)(m,{ref:e=>b.current[s]=e,id:"scaffold-".concat(a,"-").concat(s),value:g[s]||"",onChange:e=>y(s,e),onFocus:()=>k(s),onBlur:()=>k(null),onKeyDown:e=>q(e,s),placeholder:"Votre rÃ©ponse",ariaLabel:e.label||"Ã‰tape ".concat(s+1),disabled:z,compact:M>4}),!0===n&&(0,d.jsx)("span",{className:"ka-scaffold__feedback ka-scaffold__feedback--correct","aria-label":"Correct",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),!1===n&&(0,d.jsx)("span",{className:"ka-scaffold__feedback ka-scaffold__feedback--wrong","aria-label":"Incorrect",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),!1===n&&c[s]&&(0,d.jsxs)("div",{className:"ka-scaffold__expected",children:["RÃ©ponse attendue : ",(0,d.jsx)(v,{text:c[s].answer})]})]})]},s)})}),(0,d.jsxs)("div",{className:"ka-scaffold__bottom",children:[x&&z?(0,d.jsxs)("div",{className:"ka-scaffold__status ka-scaffold__status--success",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Excellent ! Toutes les rÃ©ponses sont correctes."]}):x&&L>0?(0,d.jsxs)("div",{className:"ka-scaffold__status ka-scaffold__status--retry",children:[(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),A,"/",M," correct",A>1?"s":""," â€” corrigez les erreurs et rÃ©essayez."]}):null,(0,d.jsx)("button",{className:"ka-scaffold__check-btn ".concat(E?"":"ka-scaffold__check-btn--disabled"," ").concat(z?"ka-scaffold__check-btn--done":""),onClick:C,disabled:!E||z,type:"button",children:z?"âœ“ TerminÃ©":x?"RevÃ©rifier":"VÃ©rifier"})]})]})}function S(e){let{question:s,index:a,value:t,onChange:n}=e;const l=s.type||"unknown";if(b(s))return(0,d.jsx)(M,{question:s,index:a,value:t,onChange:n});switch(l){case"multiple_choice":return(0,d.jsx)(P,{question:s,index:a,value:t,onChange:n});case"true_false":return(0,d.jsx)(z,{index:a,value:t,onChange:n});case"fill_blank":case"calculation":case"short_answer":default:return(0,d.jsx)(E,{type:l,index:a,value:t,onChange:n});case"essay":return(0,d.jsx)(F,{index:a,value:t,onChange:n});case"matching":return(0,d.jsx)(O,{question:s,index:a,value:t,onChange:n})}}const A=["","Par dÃ©finition","Par hypothÃ¨se","Par simplification","Par factorisation","Par substitution","Par identitÃ© remarquable","Par calcul","Par dÃ©veloppement","Par rÃ©currence","Par l'absurde","Par contraposÃ©e","D'aprÃ¨s le thÃ©orÃ¨me","En utilisant la propriÃ©tÃ©","On en dÃ©duit que","Autre"],L=["Bien jouÃ© ! ğŸ‰","Super ! Continue ğŸ’ª","Bravo ! ğŸ‘","Excellent travail ! â­","Bien raisonnÃ© ! ğŸ§ "];function M(e){let{question:s,index:a,value:t,onChange:l}=e;const i=(0,o.n7)(),r=(null==s?void 0:s._displayText)||(null==s?void 0:s.question)||"",c=(0,n.useMemo)(()=>function(e){for(const s of f)if(s.re.test(e))return s;return j}(r),[r]),[u,m]=(0,n.useState)(0),[h,x]=(0,n.useState)(""),{steps:_,finalAnswer:v}=(0,n.useMemo)(()=>{if(!t)return{steps:c.scaffoldSteps.map(()=>({math:"",justification:""})),finalAnswer:""};try{const e=JSON.parse(t);if(e&&e.steps&&Array.isArray(e.steps))return{steps:e.steps,finalAnswer:e.finalAnswer||""};if(Array.isArray(e)&&e.length>0)return{steps:e,finalAnswer:""}}catch(e){}return"string"==typeof t&&t.trim()?{steps:[{math:t,justification:""}],finalAnswer:""}:{steps:c.scaffoldSteps.map(()=>({math:"",justification:""})),finalAnswer:""}},[t,c]),k=_.filter(e=>{var s;return null===(s=e.math)||void 0===s?void 0:s.trim()}).length,b=_.length,g=b>0?Math.round(k/b*100):0,N=(0,n.useCallback)((e,s)=>{l(a,JSON.stringify({steps:e,finalAnswer:s}))},[a,l]),y=(0,n.useCallback)((e,s,a)=>{var t;const n=_.map((t,n)=>n===e?p(p({},t),{},{[s]:a}):t);"math"!==s||!a.trim()||null!==(t=_[e].math)&&void 0!==t&&t.trim()||(x(L[Math.floor(Math.random()*L.length)]),setTimeout(()=>x(""),2e3)),N(n,v)},[_,v,N]),w=(0,n.useCallback)(()=>{N([..._,{math:"",justification:""}],v)},[_,v,N]),C=(0,n.useCallback)(e=>{_.length<=1||N(_.filter((s,a)=>a!==e),v)},[_,v,N]),q=(0,n.useCallback)(e=>{N(_,e)},[_,N]),S=(0,n.useCallback)(()=>{m(e=>Math.min(e+1,c.scaffoldSteps.length))},[c]),A=u<c.scaffoldSteps.length;return(0,d.jsxs)("div",{className:"ka-proof",children:[(0,d.jsxs)("div",{className:"ka-proof__header",children:[(0,d.jsx)("div",{className:"ka-proof__header-left",children:(0,d.jsxs)("span",{className:"ka-proof__type-badge",children:[c.icon||"ğŸ“"," ",c.label]})}),(0,d.jsx)("div",{className:"ka-proof__header-right",children:(0,d.jsxs)("div",{className:"ka-proof__progress",children:[(0,d.jsx)("div",{className:"ka-proof__progress-bar",children:(0,d.jsx)("div",{className:"ka-proof__progress-fill",style:{width:"".concat(g,"%")}})}),(0,d.jsxs)("span",{className:"ka-proof__progress-text",children:[k,"/",b]})]})})]}),h&&(0,d.jsx)("div",{className:"ka-proof__encouragement",children:h}),(0,d.jsx)("div",{className:"ka-proof__timeline",children:_.map((e,s)=>{var a,t,n;const l=!(null===(a=e.math)||void 0===a||!a.trim()),r=!(l||0!==s&&(null===(t=_[s-1])||void 0===t||null===(t=t.math)||void 0===t||!t.trim())),m=(null===(n=c.scaffoldSteps[s])||void 0===n?void 0:n.hint)||"",h=s<u;return(0,d.jsxs)("div",{className:"ka-step ".concat(l?"ka-step--done":""," ").concat(r?"ka-step--active":""),children:[(0,d.jsxs)("div",{className:"ka-step__rail",children:[(0,d.jsx)("div",{className:"ka-step__dot",children:l?(0,d.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,d.jsx)("path",{d:"M2 6l3 3 5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,d.jsx)("span",{className:"ka-step__dot-number",children:s+1})}),s<b-1&&(0,d.jsx)("div",{className:"ka-step__connector"})]}),(0,d.jsxs)("div",{className:"ka-step__content",children:[(0,d.jsxs)("div",{className:"ka-step__label",children:["Ã‰tape ",s+1]}),h&&m&&!l&&(0,d.jsxs)("div",{className:"ka-step__hint",children:[(0,d.jsx)("span",{className:"ka-step__hint-icon",children:"ğŸ’¡"}),m]}),(0,d.jsx)("textarea",{className:"ka-step__input",value:e.math,onChange:e=>y(s,"math",e.target.value),placeholder:l?"":"Ã‰crivez votre expression iciâ€¦",rows:1,spellCheck:"false"}),e.math&&(/\$/.test(e.math)||/\\[a-zA-Z]/.test(e.math))&&i&&(0,d.jsx)("div",{className:"ka-step__preview",children:(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(e.math,i)})}),(0,d.jsx)(I,{value:e.justification,onChange:e=>y(s,"justification",e)}),b>1&&(0,d.jsx)("button",{type:"button",className:"ka-step__remove",onClick:()=>C(s),"aria-label":"Supprimer cette Ã©tape",children:"âœ•"})]})]},s)})}),(0,d.jsxs)("div",{className:"ka-proof__actions",children:[(0,d.jsx)("button",{type:"button",className:"ka-proof__add-btn",onClick:w,children:"+ Ajouter une Ã©tape"}),A&&(0,d.jsx)("button",{type:"button",className:"ka-proof__hint-btn",onClick:S,children:"ğŸ’¡ Obtenir un indice"})]}),c.askFinalAnswer&&(0,d.jsxs)("div",{className:"ka-proof__answer",children:[(0,d.jsxs)("div",{className:"ka-proof__answer-header",children:[(0,d.jsx)("span",{className:"ka-proof__answer-icon",children:"ğŸ¯"}),(0,d.jsx)("label",{className:"ka-proof__answer-label",children:c.finalLabel||"RÃ©sultat final"}),(0,d.jsx)("span",{className:"ka-proof__answer-badge",children:"VÃ©rifiÃ© automatiquement"})]}),(0,d.jsx)("input",{className:"ka-proof__answer-input",type:"text",value:v,onChange:e=>q(e.target.value),placeholder:"Votre ".concat((c.finalLabel||"rÃ©sultat").toLowerCase(),"â€¦")}),v&&(/\$/.test(v)||/\\[a-zA-Z]/.test(v))&&i&&(0,d.jsx)("div",{className:"ka-proof__answer-preview",children:(0,d.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(v,i)})})]})]})}function I(e){let{value:s,onChange:a}=e;const[t,l]=(0,n.useState)(!1);return t||s?(0,d.jsxs)("div",{className:"ka-justify",children:[(0,d.jsxs)("select",{className:"ka-justify__select",value:A.includes(s)?s:s?"Autre":"",onChange:e=>{const t=e.target.value;"Autre"===t?A.includes(s)&&a(""):a(t)},children:[(0,d.jsx)("option",{value:"",children:"â€” Choisir â€”"}),A.slice(1).map(e=>(0,d.jsx)("option",{value:e,children:e},e))]}),s&&!A.includes(s)&&(0,d.jsx)("input",{className:"ka-justify__custom",type:"text",value:s,onChange:e=>a(e.target.value),placeholder:"Justification personnalisÃ©eâ€¦"}),!s&&(0,d.jsx)("button",{type:"button",className:"ka-justify__close",onClick:()=>l(!1),children:"âœ•"})]}):(0,d.jsx)("button",{type:"button",className:"ka-justify__toggle",onClick:()=>l(!0),children:"+ Justification"})}function P(e){let{question:s,index:a,value:t,onChange:n}=e;const l=s.options||{},i=Object.entries(l);return 0===i.length?(0,d.jsxs)("div",{className:"exam-take__no-options",children:[(0,d.jsx)("p",{children:"Options non disponibles pour cette question. Tapez votre rÃ©ponse :"}),(0,d.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(a,e.target.value),placeholder:"Votre rÃ©ponseâ€¦"})]}):(0,d.jsx)("div",{className:"exam-take__mcq-options",children:i.map(e=>{let[s,l]=e;const i=t===s;return(0,d.jsxs)("label",{className:"exam-take__mcq-option ".concat(i?"exam-take__mcq-option--selected":""),children:[(0,d.jsx)("input",{type:"radio",name:"q-".concat(a),value:s,checked:i,onChange:()=>n(a,s),className:"exam-take__mcq-radio"}),(0,d.jsx)("span",{className:"exam-take__mcq-key",children:s.toUpperCase()}),(0,d.jsx)("span",{className:"exam-take__mcq-text",children:(0,d.jsx)(v,{text:l})})]},s)})})}function z(e){let{index:s,value:a,onChange:t}=e;return(0,d.jsx)("div",{className:"exam-take__tf-options",children:[{key:"vrai",label:"âœ… Vrai"},{key:"faux",label:"âŒ Faux"}].map(e=>{let{key:n,label:l}=e;const i=a===n;return(0,d.jsxs)("label",{className:"exam-take__tf-option ".concat(i?"exam-take__tf-option--selected":""),children:[(0,d.jsx)("input",{type:"radio",name:"q-".concat(s),value:n,checked:i,onChange:()=>t(s,n),className:"exam-take__tf-radio"}),(0,d.jsx)("span",{children:l})]},n)})})}function E(e){let{type:s,index:a,value:t,onChange:n}=e;return(0,d.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(a,e.target.value),placeholder:{fill_blank:"ComplÃ©tez le blancâ€¦",calculation:"Entrez votre rÃ©sultatâ€¦",short_answer:"Votre rÃ©ponseâ€¦"}[s]||"Votre rÃ©ponseâ€¦"})}function F(e){let{index:s,value:a,onChange:t}=e;return(0,d.jsx)("textarea",{className:"exam-take__essay-input",value:a,onChange:e=>t(s,e.target.value),placeholder:"RÃ©digez votre rÃ©ponse iciâ€¦",rows:8})}function O(e){let{question:s,index:a,value:t,onChange:n}=e;return(0,d.jsxs)("div",{className:"exam-take__matching",children:[(0,d.jsx)("p",{className:"exam-take__matching-hint",children:"Entrez vos correspondances (ex: 1-B, 2-A, 3-C)"}),(0,d.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(a,e.target.value),placeholder:"1-B, 2-A, 3-Câ€¦"})]})}const R=()=>{var e;const{examIndex:s}=(0,l.g)(),a=(0,l.Zp)(),{data:t,isLoading:u,error:m}=((0,o.n7)(),(0,i.I)({queryKey:["exam-catalog"],queryFn:async()=>{const e=await fetch("/exam_catalog.json");if(!e.ok)throw new Error("Failed to load exam catalog");return e.json()},staleTime:1/0})),x=parseInt(s,10),f=null==t?void 0:t[x],j=(0,n.useMemo)(()=>f?(0,h.Y)(f):[],[f]),k=(0,n.useMemo)(()=>{const e=[];for(let t=0;t<j.length;t++){var s,a;const n=String((null===(s=j[t])||void 0===s?void 0:s.sectionTitle)||"").trim()||"Questions",l=String((null===(a=j[t])||void 0===a?void 0:a.sectionInstructions)||"").trim(),i=e[e.length-1];i&&i.title===n&&i.instructions===l?i.end=t:e.push({title:n,instructions:l,start:t,end:t})}return e.map(e=>p(p({},e),{},{count:e.end-e.start+1}))},[j]),g=(0,n.useMemo)(()=>{const e=[];for(let s=0;s<j.length;s++){const a=j[s]._subExGroup,t=e[e.length-1];a&&t&&t.group===a?(t.end=s,t.indices.push(s)):e.push({group:a,start:s,end:s,indices:[s]})}return e},[j]),[A,L]=(0,n.useState)(!1),M=(0,n.useMemo)(()=>{if(!f)return null;let e=[];const s=(f.sections||[]).map(s=>{const a=(s.instructions||"").trim(),{rules:t,cleanedText:n}=(0,h.P5)(a);return t.length&&e.push(...t),p(p({},s),{},{_cleanInstructions:a?n:null,_hadRules:t.length>0})}),a=new Set;return{rules:e.filter(e=>{const s=e.toLowerCase().replace(/[^a-zÃ -Ã¿0-9]/gi,"").slice(0,40);return!a.has(s)&&(a.add(s),!0)}),cleanedSections:s}},[f]),[I,P]=(0,n.useState)(0),[z,E]=(0,n.useState)({}),[F,O]=(0,n.useState)(!1),[R,T]=(0,n.useState)(!1),D=(null==f?void 0:f.duration_minutes)||0,[B,V]=(0,n.useState)(60*D),W=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(D&&!F)return V(60*D),W.current=setInterval(()=>{V(e=>e<=1?(clearInterval(W.current),0):e-1)},1e3),()=>clearInterval(W.current)},[D,F]),(0,n.useEffect)(()=>{D&&0===B&&!F&&Y()},[B]);const $=e=>{const s=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60;return s>0?"".concat(s,":").concat(String(a).padStart(2,"0"),":").concat(String(t).padStart(2,"0")):"".concat(a,":").concat(String(t).padStart(2,"0"))},Z=(0,n.useCallback)((e,s)=>{E(a=>p(p({},a),{},{[e]:s}))},[]),H=Object.keys(z).filter(e=>{const s=z[e];if(null==s||""===s)return!1;if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{const e=JSON.parse(s);var a;if(e&&e.steps)return e.steps.some(e=>{var s;return null===(s=e.math)||void 0===s?void 0:s.trim()})||!(null===(a=e.finalAnswer)||void 0===a||!a.trim());if(Array.isArray(e))return e.some(e=>{var s;return null===(s=e.math)||void 0===s?void 0:s.trim()})}catch(e){}return!0}).length,J=j.length>0?Math.round(H/j.length*100):0;(0,n.useEffect)(()=>{const e=e=>{"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable||("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),P(e=>{const s=g.findIndex(s=>e>=s.start&&e<=s.end),a=g[s+1];return a?a.start:e})):"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),P(e=>{const s=g.findIndex(s=>e>=s.start&&e<=s.end),a=g[s-1];return a?a.start:e})))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j.length,g]);const G=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=G.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},[I]);const[K,U]=(0,n.useState)(!1),Y=(0,n.useCallback)(()=>{clearInterval(W.current),O(!0);const e=(0,h.$4)(j,z);sessionStorage.setItem("exam-result-".concat(x),JSON.stringify({examIndex:x,examTitle:(0,h.Vj)(f),subject:(0,h.c$)(f.subject),level:(0,h.yf)(f.level),result:e,timestamp:Date.now()})),a("/exams/".concat(x,"/results"))},[j,z,x,f,a]);if(u)return(0,d.jsx)("section",{className:"section",children:(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"card card--centered card--loading",children:(0,d.jsx)("div",{className:"loading-spinner"})})})});if(m||!f)return(0,d.jsx)("section",{className:"section",children:(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("div",{className:"card card--message",children:[(0,d.jsx)("p",{children:"Examen introuvable."}),(0,d.jsx)("button",{className:"button button--primary",onClick:()=>a("/exams"),children:"â† Retour aux examens"})]})})});const Q=(0,h.c$)(f.subject),X=(0,h.cS)(Q);if(!A){var ee;const e=(f.sections||[]).map((e,s)=>({title:e.section_title||"Section ".concat(s+1),qCount:(e.questions||[]).length})),s=e.reduce((e,s)=>e+s.qCount,0),t=e=>{const s=e.toLowerCase();return s.includes("interdit")?"ğŸš«":s.includes("silence")?"ğŸ¤«":s.includes("obligatoire")?"âš ï¸":s.includes("durÃ©e")||s.includes("heure")?"â°":s.includes("coefficient")?"ğŸ“Š":"â„¹ï¸"};return(0,d.jsxs)("section",{className:"exam-cover",style:{"--cover-accent":X},children:[(0,d.jsxs)("div",{className:"exam-cover__bg",children:[(0,d.jsx)("div",{className:"exam-cover__orb exam-cover__orb--1"}),(0,d.jsx)("div",{className:"exam-cover__orb exam-cover__orb--2"}),(0,d.jsx)("div",{className:"exam-cover__orb exam-cover__orb--3"}),(0,d.jsx)("div",{className:"exam-cover__grid"})]}),(0,d.jsxs)("div",{className:"exam-cover__inner",children:[(0,d.jsxs)("nav",{className:"exam-cover__nav",children:[(0,d.jsxs)("button",{className:"exam-cover__back",onClick:()=>a("/exams"),children:[(0,d.jsx)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),(0,d.jsxs)("div",{className:"exam-cover__brand",children:[(0,d.jsx)("span",{className:"exam-cover__brand-icon",children:"ğŸ“"}),(0,d.jsx)("span",{children:"EdLight Academy"})]})]}),(0,d.jsxs)("div",{className:"exam-cover__hero",children:[(0,d.jsx)("div",{className:"exam-cover__badge",style:{background:X,color:"#fff"},children:Q}),(0,d.jsx)("h1",{className:"exam-cover__title",children:(0,h.Vj)(f)}),f.year&&(0,d.jsx)("p",{className:"exam-cover__year",children:f.year}),(0,d.jsxs)("div",{className:"exam-cover__stats",children:[D>0&&(0,d.jsxs)("div",{className:"exam-cover__stat",children:[(0,d.jsx)("span",{className:"exam-cover__stat-value",children:D}),(0,d.jsx)("span",{className:"exam-cover__stat-label",children:"minutes"})]}),f.total_points>0&&(0,d.jsxs)("div",{className:"exam-cover__stat",children:[(0,d.jsx)("span",{className:"exam-cover__stat-value",children:f.total_points}),(0,d.jsx)("span",{className:"exam-cover__stat-label",children:"points"})]}),(0,d.jsxs)("div",{className:"exam-cover__stat",children:[(0,d.jsx)("span",{className:"exam-cover__stat-value",children:s}),(0,d.jsx)("span",{className:"exam-cover__stat-label",children:"questions"})]}),(0,d.jsxs)("div",{className:"exam-cover__stat",children:[(0,d.jsx)("span",{className:"exam-cover__stat-value",children:e.length}),(0,d.jsx)("span",{className:"exam-cover__stat-label",children:e.length>1?"sections":"section"})]})]})]}),(0,d.jsxs)("div",{className:"exam-cover__body",children:[(0,d.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--sections",children:[(0,d.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,d.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Structure"]}),(0,d.jsx)("ol",{className:"exam-cover__section-list",children:e.map((e,s)=>(0,d.jsxs)("li",{className:"exam-cover__section-row",children:[(0,d.jsx)("span",{className:"exam-cover__section-dot",style:{background:X}}),(0,d.jsx)("span",{className:"exam-cover__section-name",children:e.title}),(0,d.jsx)("span",{className:"exam-cover__section-qty",children:e.qCount})]},s))})]}),(null==M||null===(ee=M.rules)||void 0===ee?void 0:ee.length)>0&&(0,d.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--rules",children:[(0,d.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,d.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Consignes"]}),(0,d.jsx)("ul",{className:"exam-cover__rules-list",children:M.rules.map((e,s)=>(0,d.jsxs)("li",{className:"exam-cover__rule-item",children:[(0,d.jsx)("span",{className:"exam-cover__rule-icon",children:t(e)}),(0,d.jsx)("span",{children:e})]},s))})]})]}),(0,d.jsxs)("div",{className:"exam-cover__cta",children:[(0,d.jsxs)("button",{className:"exam-cover__start-btn",style:{background:X},onClick:()=>L(!0),children:[(0,d.jsx)("span",{children:"Commencer l'examen"}),(0,d.jsx)("svg",{width:"22",height:"22",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,d.jsx)("p",{className:"exam-cover__cta-hint",children:"Bonne chance ! ğŸ€"})]})]})]})}const se=j[I];if(!se)return null;const ae=g.findIndex(e=>I>=e.start&&I<=e.end),te=g[ae]||{start:I,end:I,indices:[I],group:null},ne=te.indices.map(e=>p(p({},j[e]),{},{_flatIdx:e})),le=ae>=g.length-1,ie=ae<=0,re=((0,h._Y)(se.type),D&&B<300),ce=(f.sections||[]).findIndex(e=>e.section_title===se.sectionTitle),oe=null==M||null===(e=M.cleanedSections)||void 0===e?void 0:e[ce],de=null!=oe&&oe._hadRules?oe._cleanInstructions||"":se.sectionInstructions||"";return(0,d.jsx)("section",{className:"section exam-take",children:(0,d.jsxs)("div",{className:"container",children:[(0,d.jsxs)("div",{className:"exam-take__topbar",children:[(0,d.jsxs)("div",{className:"exam-take__topbar-left",children:[(0,d.jsx)("button",{className:"button button--ghost button--sm",onClick:()=>a("/exams"),children:"â† Examens"}),(0,d.jsxs)("div",{className:"exam-take__exam-info",children:[(0,d.jsx)("span",{className:"exam-take__subject",style:{color:X},children:Q}),(0,d.jsx)("span",{className:"exam-take__title-short",children:(0,h.Vj)(f)})]})]}),(0,d.jsxs)("div",{className:"exam-take__topbar-right",children:[(0,d.jsxs)("span",{className:"exam-take__progress",children:[H,"/",j.length]}),D>0&&(0,d.jsxs)("span",{className:"exam-take__timer ".concat(re?"exam-take__timer--warning":""),"aria-live":"polite","aria-label":"Temps restant: ".concat($(B)),children:[(0,d.jsx)("span",{"aria-hidden":"true",children:"â±"})," ",$(B)]}),(0,d.jsx)("button",{className:"button button--primary button--sm",onClick:()=>T(!0),children:"Soumettre"})]})]}),(0,d.jsx)("div",{className:"exam-take__progress-bar",role:"progressbar","aria-valuenow":J,"aria-valuemin":0,"aria-valuemax":100,children:(0,d.jsx)("div",{className:"exam-take__progress-fill",style:{width:"".concat(J,"%")}})}),(0,d.jsxs)("div",{className:"exam-take__body",children:[(0,d.jsxs)("aside",{className:"exam-take__nav",style:{"--nav-accent":X},children:[(0,d.jsxs)("div",{className:"exam-take__nav-progress",children:[(0,d.jsxs)("div",{className:"exam-take__nav-ring-wrap",children:[(0,d.jsxs)("svg",{className:"exam-take__nav-ring",viewBox:"0 0 48 48","aria-hidden":"true",children:[(0,d.jsx)("circle",{className:"exam-take__nav-ring-bg",cx:"24",cy:"24",r:"19"}),(0,d.jsx)("circle",{className:"exam-take__nav-ring-fill",cx:"24",cy:"24",r:"19",style:{strokeDasharray:"".concat(2*Math.PI*19),strokeDashoffset:"".concat(2*Math.PI*19*(1-J/100))}})]}),(0,d.jsxs)("span",{className:"exam-take__nav-ring-pct",children:[J,(0,d.jsx)("small",{children:"%"})]})]}),(0,d.jsxs)("div",{className:"exam-take__nav-progress-meta",children:[(0,d.jsx)("span",{className:"exam-take__nav-progress-title",children:"Progression"}),(0,d.jsxs)("span",{className:"exam-take__nav-progress-detail",children:[H," sur ",j.length]})]})]}),(0,d.jsx)("div",{className:"exam-take__nav-divider"}),(0,d.jsx)("div",{className:"exam-take__nav-sections",role:"navigation","aria-label":"Navigation des questions par section",children:k.map(e=>{const s=I>=e.start&&I<=e.end,a=Array.from({length:e.count}).filter((s,a)=>{const t=z[e.start+a];return null!=t&&""!==t}).length,t=a===e.count;return(0,d.jsxs)("div",{className:"exam-take__nav-section ".concat(s?"exam-take__nav-section--active":""),children:[(0,d.jsxs)("div",{className:"exam-take__nav-section-title ".concat(s?"exam-take__nav-section-title--current":""),children:[(0,d.jsx)("span",{className:"exam-take__nav-section-name",children:e.title}),(0,d.jsx)("span",{className:"exam-take__nav-section-badge ".concat(t?"exam-take__nav-section-badge--done":""),children:t?"âœ“":"".concat(a,"/").concat(e.count)})]}),(0,d.jsx)("div",{className:"exam-take__nav-section-grid",children:Array.from({length:e.count}).map((s,a)=>{const t=e.start+a,n=j[t],l=null!=z[t]&&""!==z[t],i=t>=te.start&&t<=te.end;let r="exam-take__nav-btn";i?r+=" exam-take__nav-btn--current":l&&(r+=" exam-take__nav-btn--answered");const c=function(e,s){const a=e._displayNumber;if(!a)return String(s+1);if(a.length<=4)return a;const t=a.match(/^([A-Z]+)[\-.]?\s*.*?(\d+)$/i);if(t){let e=t[1];e.length>2&&(e=e.slice(0,2)+".");const s=e+t[2];return s.length<=5?s:s.slice(0,4)+"â€¦"}return a.slice(0,3)+"â€¦"}(n,t),o=g.find(e=>t>=e.start&&t<=e.end);return(0,d.jsxs)("button",{className:r,onClick:()=>P(o?o.start:t),title:"Question ".concat(_(n,t)),type:"button",children:[c,l&&!i&&(0,d.jsx)("span",{className:"exam-take__nav-btn-check","aria-hidden":"true"})]},t)})})]},"".concat(e.start,"-").concat(e.end,"-").concat(e.title))})})]}),(0,d.jsxs)("div",{className:"exam-take__content",ref:G,children:[se.sectionTitle&&(0,d.jsx)(N,{title:se.sectionTitle,instructions:de&&de.length<=200?de:""}),de&&de.length>200&&(0,d.jsx)(y,{text:de}),ne[0]._subExDirective&&(0,d.jsxs)("div",{className:"exam-take__subex-header",children:[(0,d.jsxs)("span",{className:"exam-take__subex-label",children:[ne[0]._subExGroup,"."]}),(0,d.jsx)("span",{className:"exam-take__subex-directive",children:(0,d.jsx)(v,{text:ne[0]._subExDirective.replace(/^[A-Z][.\-)\s]+/,"")})})]}),ne[0]._wordPool&&(0,d.jsxs)("div",{className:"exam-take__word-pool",children:[(0,d.jsx)("span",{className:"exam-take__word-pool-label",children:"Banque de mots :"})," ",(0,d.jsx)("span",{className:"exam-take__word-pool-words",children:ne[0]._wordPool})]}),ne.map(e=>{var s,a,t;const n=(0,h._Y)(e.type),l=e._flatIdx;return(0,d.jsxs)("div",{className:"card exam-take__question-card",children:[(0,d.jsxs)("div",{className:"exam-take__question-header",children:[(0,d.jsxs)("span",{className:"exam-take__question-number",children:[(0,d.jsx)("span",{className:"exam-take__question-num-label",children:_(e,l)}),1===ne.length&&(0,d.jsxs)("span",{className:"exam-take__question-num-total",children:[" / ",j.length]})]}),(0,d.jsxs)("span",{className:"exam-take__question-type",style:{background:X+"18",color:X},children:[n.icon," ",n.label]}),e.points&&(0,d.jsxs)("span",{className:"exam-take__question-points",children:[e.points," pt",1!==e.points?"s":""]})]}),e.has_figure&&e.figure_description&&(0,d.jsx)(r.A,{description:e.figure_description}),"fill_blank"===e.type&&(i=e._displayText||e.question,/_{4,}|\.{4,}/.test(i))?(0,d.jsx)("div",{className:"exam-take__question-text",children:(0,d.jsx)(w,{text:e._displayText||e.question,index:l,value:null!==(s=z[l])&&void 0!==s?s:"",onChange:Z})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"exam-take__question-text",children:(0,d.jsx)(c.A,{text:e._displayText||e.question})}),!e.correct&&e.scaffold_text&&e.scaffold_blanks?(0,d.jsx)("div",{className:"exam-take__answer-area",children:(0,d.jsx)(q,{question:e,index:l,value:null!==(a=z[l])&&void 0!==a?a:"",onChange:Z})}):(0,d.jsx)("div",{className:"exam-take__answer-area",children:(0,d.jsx)(S,{question:e,index:l,value:null!==(t=z[l])&&void 0!==t?t:"",onChange:Z})})]}),!b(e)&&e.hints&&e.hints.length>0&&(0,d.jsx)(C,{hints:e.hints})]},l);var i}),ne.length>1&&(0,d.jsxs)("div",{className:"exam-take__group-counter",children:[ne[0]._subExGroup?"Groupe ".concat(ne[0]._subExGroup):"Groupe"," â€” ",ne.length," questions (",ne[0]._flatIdx+1,"â€“",ne[ne.length-1]._flatIdx+1," sur ",j.length,")"]}),(0,d.jsxs)("div",{className:"exam-take__question-nav",children:[(0,d.jsx)("button",{className:"button button--ghost",disabled:ie,onClick:()=>{const e=g[ae-1];e&&P(e.start)},children:"â† PrÃ©cÃ©dent"}),le?(0,d.jsx)("button",{className:"button button--primary",onClick:()=>T(!0),children:"Terminer l'examen"}):(0,d.jsx)("button",{className:"button button--primary",onClick:()=>{const e=g[ae+1];e&&P(e.start)},children:"Suivant â†’"})]})]})]}),R&&(0,d.jsx)("div",{className:"exam-take__overlay",onClick:()=>T(!1),children:(0,d.jsxs)("div",{className:"exam-take__modal card",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("h3",{children:"Soumettre l'examen ?"}),(0,d.jsxs)("p",{children:["Vous avez rÃ©pondu Ã  ",(0,d.jsx)("strong",{children:H})," sur"," ",(0,d.jsx)("strong",{children:j.length})," questions.",H<j.length&&(0,d.jsxs)("span",{className:"exam-take__modal-warning",children:[" ","âš ï¸ ",j.length-H," question",j.length-H>1?"s":""," sans rÃ©ponse."]})]}),(0,d.jsxs)("div",{className:"exam-take__modal-actions",children:[(0,d.jsx)("button",{className:"button button--ghost",onClick:()=>T(!1),children:"Continuer l'examen"}),(0,d.jsx)("button",{className:"button button--primary",onClick:Y,children:"Soumettre maintenant"})]})]})}),K&&de&&de.length>200&&(0,d.jsx)("div",{className:"exam-take__overlay",onClick:()=>U(!1),children:(0,d.jsxs)("div",{className:"exam-take__passage-panel",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"exam-take__passage-panel-header",children:[(0,d.jsx)("h3",{children:"ğŸ“– Texte de rÃ©fÃ©rence"}),(0,d.jsx)("button",{className:"exam-take__passage-panel-close",onClick:()=>U(!1),type:"button",children:"âœ•"})]}),(0,d.jsx)("div",{className:"exam-take__passage-panel-body",children:(0,d.jsx)(c.A,{text:de})})]})})]})})}}}]);