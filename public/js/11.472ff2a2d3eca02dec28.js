"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[11],{6011:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var s=t(4705),n=t(6540),r=t(7767),c=t(1444),l=t(7028),i=t(3212),o=t(7791),d=t(9920),x=t(4848);function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function u(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(Object(t),!0).forEach(function(a){(0,s.A)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function h(e,a){return e._displayNumber||String(a+1)}function _(e){let{text:a}=e;const t=(0,o.n7)();return a?/\$/.test(a)||/\\\(/.test(a)?(0,x.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(a,t)}):(0,x.jsx)(x.Fragment,{children:a}):null}const p=/_{4,}|\.{4,}/g;function v(e){let{title:a,instructions:t}=e;const[s,r]=(0,n.useState)(!1),c=!(null==t||!t.trim());return(0,x.jsxs)("div",{className:"exam-take__section-header",children:[(0,x.jsxs)("div",{className:"exam-take__section-header-top",onClick:()=>c&&r(e=>!e),role:c?"button":void 0,tabIndex:c?0:void 0,onKeyDown:e=>{!c||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r(e=>!e))},children:[(0,x.jsx)("h3",{children:a}),c&&(0,x.jsx)("button",{className:"exam-take__section-toggle",type:"button","aria-label":s?"Afficher les instructions":"Masquer les instructions",tabIndex:-1,children:s?"‚ñ∂":"‚ñº"})]}),c&&!s&&(0,x.jsx)(i.A,{text:t})]})}function j(e){let{text:a}=e;const[t,s]=(0,n.useState)(!0);return a?(0,x.jsxs)("div",{className:"exam-take__reading-passage ".concat(t?"":"exam-take__reading-passage--collapsed"),children:[(0,x.jsxs)("div",{className:"exam-take__reading-passage-bar",onClick:()=>s(e=>!e),children:[(0,x.jsx)("span",{className:"exam-take__reading-passage-icon",children:"üìñ"}),(0,x.jsx)("span",{className:"exam-take__reading-passage-label",children:"Texte de r√©f√©rence"}),(0,x.jsx)("button",{className:"exam-take__reading-passage-toggle",type:"button","aria-label":t?"R√©duire le texte":"Afficher le texte",tabIndex:-1,children:t?"‚ñ≤ R√©duire":"‚ñº Afficher le texte"})]}),t&&(0,x.jsx)("div",{className:"exam-take__reading-passage-body",children:(0,x.jsx)(i.A,{text:a})})]}):null}function g(e){let{text:a,index:t,value:s,onChange:r}=e;const c=a.split(p),l=c.length-1,i=l>1?(s||"").split("|").concat(Array(l).fill("")).slice(0,l):[s||""],o=/^\s*\(([^)]+)\)/;return(0,x.jsx)("div",{className:"exam-take__fill-blank-text",children:c.map((e,a)=>{let s="",c=e;if(a>0){const a=e.match(o);a&&(s=a[1],c=e.slice(a[0].length))}return(0,x.jsxs)(n.Fragment,{children:[a>0&&(0,x.jsxs)("span",{className:"exam-take__inline-blank-wrap",children:[s&&(0,x.jsx)("span",{className:"exam-take__inline-blank-hint",children:s}),(0,x.jsx)("input",{type:"text",className:"exam-take__inline-blank",value:i[a-1],onChange:e=>((e,a)=>{if(l<=1)r(t,a);else{const s=[...i];s[e]=a,r(t,s.join("|"))}})(a-1,e.target.value),placeholder:s||"‚Ä¶",autoComplete:"off",spellCheck:"false",style:s?{minWidth:"".concat(Math.max(.6*s.length+2,5),"em")}:void 0})]}),c&&(0,x.jsx)("span",{children:(0,x.jsx)(_,{text:c})})]},a)})})}function k(e){let{question:a,index:t,value:s,onChange:n}=e;const r=a.type||"unknown";switch(r){case"multiple_choice":return(0,x.jsx)(N,{question:a,index:t,value:s,onChange:n});case"true_false":return(0,x.jsx)(b,{index:t,value:s,onChange:n});case"fill_blank":case"calculation":case"short_answer":default:return(0,x.jsx)(f,{type:r,index:t,value:s,onChange:n});case"essay":return(0,x.jsx)(y,{index:t,value:s,onChange:n});case"matching":return(0,x.jsx)(w,{question:a,index:t,value:s,onChange:n})}}function N(e){let{question:a,index:t,value:s,onChange:n}=e;const r=a.options||{},c=Object.entries(r);return 0===c.length?(0,x.jsxs)("div",{className:"exam-take__no-options",children:[(0,x.jsx)("p",{children:"Options non disponibles pour cette question. Tapez votre r√©ponse :"}),(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:s,onChange:e=>n(t,e.target.value),placeholder:"Votre r√©ponse‚Ä¶"})]}):(0,x.jsx)("div",{className:"exam-take__mcq-options",children:c.map(e=>{let[a,r]=e;const c=s===a;return(0,x.jsxs)("label",{className:"exam-take__mcq-option ".concat(c?"exam-take__mcq-option--selected":""),children:[(0,x.jsx)("input",{type:"radio",name:"q-".concat(t),value:a,checked:c,onChange:()=>n(t,a),className:"exam-take__mcq-radio"}),(0,x.jsx)("span",{className:"exam-take__mcq-key",children:a.toUpperCase()}),(0,x.jsx)("span",{className:"exam-take__mcq-text",children:(0,x.jsx)(_,{text:r})})]},a)})})}function b(e){let{index:a,value:t,onChange:s}=e;return(0,x.jsx)("div",{className:"exam-take__tf-options",children:[{key:"vrai",label:"‚úÖ Vrai"},{key:"faux",label:"‚ùå Faux"}].map(e=>{let{key:n,label:r}=e;const c=t===n;return(0,x.jsxs)("label",{className:"exam-take__tf-option ".concat(c?"exam-take__tf-option--selected":""),children:[(0,x.jsx)("input",{type:"radio",name:"q-".concat(a),value:n,checked:c,onChange:()=>s(a,n),className:"exam-take__tf-radio"}),(0,x.jsx)("span",{children:r})]},n)})})}function f(e){let{type:a,index:t,value:s,onChange:n}=e;return(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:s,onChange:e=>n(t,e.target.value),placeholder:{fill_blank:"Compl√©tez le blanc‚Ä¶",calculation:"Entrez votre r√©sultat‚Ä¶",short_answer:"Votre r√©ponse‚Ä¶"}[a]||"Votre r√©ponse‚Ä¶"})}function y(e){let{index:a,value:t,onChange:s}=e;return(0,x.jsx)("textarea",{className:"exam-take__essay-input",value:t,onChange:e=>s(a,e.target.value),placeholder:"R√©digez votre r√©ponse ici‚Ä¶",rows:8})}function w(e){let{question:a,index:t,value:s,onChange:n}=e;return(0,x.jsxs)("div",{className:"exam-take__matching",children:[(0,x.jsx)("p",{className:"exam-take__matching-hint",children:"Entrez vos correspondances (ex: 1-B, 2-A, 3-C)"}),(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:s,onChange:e=>n(t,e.target.value),placeholder:"1-B, 2-A, 3-C‚Ä¶"})]})}const C=()=>{var e;const{examIndex:a}=(0,r.g)(),t=(0,r.Zp)(),{data:s,isLoading:m,error:p}=((0,o.n7)(),(0,c.I)({queryKey:["exam-catalog"],queryFn:async()=>{const e=await fetch("/exam_catalog.json");if(!e.ok)throw new Error("Failed to load exam catalog");return e.json()},staleTime:1/0})),N=parseInt(a,10),b=null==s?void 0:s[N],f=(0,n.useMemo)(()=>b?(0,d.Y)(b):[],[b]),y=(0,n.useMemo)(()=>{const e=[];for(let s=0;s<f.length;s++){var a,t;const n=String((null===(a=f[s])||void 0===a?void 0:a.sectionTitle)||"").trim()||"Questions",r=String((null===(t=f[s])||void 0===t?void 0:t.sectionInstructions)||"").trim(),c=e[e.length-1];c&&c.title===n&&c.instructions===r?c.end=s:e.push({title:n,instructions:r,start:s,end:s})}return e.map(e=>u(u({},e),{},{count:e.end-e.start+1}))},[f]),w=(0,n.useMemo)(()=>{const e=[];for(let a=0;a<f.length;a++){const t=f[a]._subExGroup,s=e[e.length-1];t&&s&&s.group===t?(s.end=a,s.indices.push(a)):e.push({group:t,start:a,end:a,indices:[a]})}return e},[f]),[C,q]=(0,n.useState)(!1),S=(0,n.useMemo)(()=>{if(!b)return null;let e=[];const a=(b.sections||[]).map(a=>{const t=(a.instructions||"").trim(),{rules:s,cleanedText:n}=(0,d.P5)(t);return s.length&&e.push(...s),u(u({},a),{},{_cleanInstructions:t?n:null,_hadRules:s.length>0})}),t=new Set;return{rules:e.filter(e=>{const a=e.toLowerCase().replace(/[^a-z√†-√ø0-9]/gi,"").slice(0,40);return!t.has(a)&&(t.add(a),!0)}),cleanedSections:a}},[b]),[E,I]=(0,n.useState)(0),[O,A]=(0,n.useState)({}),[M,T]=(0,n.useState)(!1),[P,L]=(0,n.useState)(!1),$=(null==b?void 0:b.duration_minutes)||0,[D,R]=(0,n.useState)(60*$),V=(0,n.useRef)(null);(0,n.useEffect)(()=>{if($&&!M)return R(60*$),V.current=setInterval(()=>{R(e=>e<=1?(clearInterval(V.current),0):e-1)},1e3),()=>clearInterval(V.current)},[$,M]),(0,n.useEffect)(()=>{$&&0===D&&!M&&U()},[D]);const B=e=>{const a=Math.floor(e/3600),t=Math.floor(e%3600/60),s=e%60;return a>0?"".concat(a,":").concat(String(t).padStart(2,"0"),":").concat(String(s).padStart(2,"0")):"".concat(t,":").concat(String(s).padStart(2,"0"))},z=(0,n.useCallback)((e,a)=>{A(t=>u(u({},t),{},{[e]:a}))},[]),F=Object.keys(O).filter(e=>""!==O[e]&&null!=O[e]).length,G=f.length>0?Math.round(F/f.length*100):0;(0,n.useEffect)(()=>{const e=e=>{"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable||("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),I(e=>{const a=w.findIndex(a=>e>=a.start&&e<=a.end),t=w[a+1];return t?t.start:e})):"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),I(e=>{const a=w.findIndex(a=>e>=a.start&&e<=a.end),t=w[a-1];return t?t.start:e})))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f.length,w]);const W=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=W.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},[E]);const[Z,H]=(0,n.useState)(!1),U=(0,n.useCallback)(()=>{clearInterval(V.current),T(!0);const e=(0,d.$4)(f,O);sessionStorage.setItem("exam-result-".concat(N),JSON.stringify({examIndex:N,examTitle:(0,d.Vj)(b),subject:(0,d.c$)(b.subject),level:(0,d.yf)(b.level),result:e,timestamp:Date.now()})),t("/exams/".concat(N,"/results"))},[f,O,N,b,t]);if(m)return(0,x.jsx)("section",{className:"section",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"card card--centered card--loading",children:(0,x.jsx)("div",{className:"loading-spinner"})})})});if(p||!b)return(0,x.jsx)("section",{className:"section",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("div",{className:"card card--message",children:[(0,x.jsx)("p",{children:"Examen introuvable."}),(0,x.jsx)("button",{className:"button button--primary",onClick:()=>t("/exams"),children:"‚Üê Retour aux examens"})]})})});const Y=(0,d.c$)(b.subject),K=(0,d.cS)(Y);if(!C){var Q;const e=(b.sections||[]).map((e,a)=>({title:e.section_title||"Section ".concat(a+1),qCount:(e.questions||[]).length})),a=e.reduce((e,a)=>e+a.qCount,0),s=e=>{const a=e.toLowerCase();return a.includes("interdit")?"üö´":a.includes("silence")?"ü§´":a.includes("obligatoire")?"‚ö†Ô∏è":a.includes("dur√©e")||a.includes("heure")?"‚è∞":a.includes("coefficient")?"üìä":"‚ÑπÔ∏è"};return(0,x.jsxs)("section",{className:"exam-cover",style:{"--cover-accent":K},children:[(0,x.jsxs)("div",{className:"exam-cover__bg",children:[(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--1"}),(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--2"}),(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--3"}),(0,x.jsx)("div",{className:"exam-cover__grid"})]}),(0,x.jsxs)("div",{className:"exam-cover__inner",children:[(0,x.jsxs)("nav",{className:"exam-cover__nav",children:[(0,x.jsxs)("button",{className:"exam-cover__back",onClick:()=>t("/exams"),children:[(0,x.jsx)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),(0,x.jsxs)("div",{className:"exam-cover__brand",children:[(0,x.jsx)("span",{className:"exam-cover__brand-icon",children:"üéì"}),(0,x.jsx)("span",{children:"EdLight Academy"})]})]}),(0,x.jsxs)("div",{className:"exam-cover__hero",children:[(0,x.jsx)("div",{className:"exam-cover__badge",style:{background:K,color:"#fff"},children:Y}),(0,x.jsx)("h1",{className:"exam-cover__title",children:(0,d.Vj)(b)}),b.year&&(0,x.jsx)("p",{className:"exam-cover__year",children:b.year}),(0,x.jsxs)("div",{className:"exam-cover__stats",children:[$>0&&(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:$}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"minutes"})]}),b.total_points>0&&(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:b.total_points}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"points"})]}),(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:a}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"questions"})]}),(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:e.length}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:e.length>1?"sections":"section"})]})]})]}),(0,x.jsxs)("div",{className:"exam-cover__body",children:[(0,x.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--sections",children:[(0,x.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,x.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Structure"]}),(0,x.jsx)("ol",{className:"exam-cover__section-list",children:e.map((e,a)=>(0,x.jsxs)("li",{className:"exam-cover__section-row",children:[(0,x.jsx)("span",{className:"exam-cover__section-dot",style:{background:K}}),(0,x.jsx)("span",{className:"exam-cover__section-name",children:e.title}),(0,x.jsx)("span",{className:"exam-cover__section-qty",children:e.qCount})]},a))})]}),(null==S||null===(Q=S.rules)||void 0===Q?void 0:Q.length)>0&&(0,x.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--rules",children:[(0,x.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,x.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Consignes"]}),(0,x.jsx)("ul",{className:"exam-cover__rules-list",children:S.rules.map((e,a)=>(0,x.jsxs)("li",{className:"exam-cover__rule-item",children:[(0,x.jsx)("span",{className:"exam-cover__rule-icon",children:s(e)}),(0,x.jsx)("span",{children:e})]},a))})]})]}),(0,x.jsxs)("div",{className:"exam-cover__cta",children:[(0,x.jsxs)("button",{className:"exam-cover__start-btn",style:{background:K},onClick:()=>q(!0),children:[(0,x.jsx)("span",{children:"Commencer l'examen"}),(0,x.jsx)("svg",{width:"22",height:"22",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,x.jsx)("p",{className:"exam-cover__cta-hint",children:"Bonne chance ! üçÄ"})]})]})]})}const J=f[E];if(!J)return null;const X=w.findIndex(e=>E>=e.start&&E<=e.end),ee=w[X]||{start:E,end:E,indices:[E],group:null},ae=ee.indices.map(e=>u(u({},f[e]),{},{_flatIdx:e})),te=X>=w.length-1,se=X<=0,ne=((0,d._Y)(J.type),$&&D<300),re=(b.sections||[]).findIndex(e=>e.section_title===J.sectionTitle),ce=null==S||null===(e=S.cleanedSections)||void 0===e?void 0:e[re],le=null!=ce&&ce._hadRules?ce._cleanInstructions||"":J.sectionInstructions||"";return(0,x.jsx)("section",{className:"section exam-take",children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"exam-take__topbar",children:[(0,x.jsxs)("div",{className:"exam-take__topbar-left",children:[(0,x.jsx)("button",{className:"button button--ghost button--sm",onClick:()=>t("/exams"),children:"‚Üê Examens"}),(0,x.jsxs)("div",{className:"exam-take__exam-info",children:[(0,x.jsx)("span",{className:"exam-take__subject",style:{color:K},children:Y}),(0,x.jsx)("span",{className:"exam-take__title-short",children:(0,d.Vj)(b)})]})]}),(0,x.jsxs)("div",{className:"exam-take__topbar-right",children:[(0,x.jsxs)("span",{className:"exam-take__progress",children:[F,"/",f.length]}),$>0&&(0,x.jsxs)("span",{className:"exam-take__timer ".concat(ne?"exam-take__timer--warning":""),"aria-live":"polite","aria-label":"Temps restant: ".concat(B(D)),children:[(0,x.jsx)("span",{"aria-hidden":"true",children:"‚è±"})," ",B(D)]}),(0,x.jsx)("button",{className:"button button--primary button--sm",onClick:()=>L(!0),children:"Soumettre"})]})]}),(0,x.jsx)("div",{className:"exam-take__progress-bar",role:"progressbar","aria-valuenow":G,"aria-valuemin":0,"aria-valuemax":100,children:(0,x.jsx)("div",{className:"exam-take__progress-fill",style:{width:"".concat(G,"%")}})}),(0,x.jsxs)("div",{className:"exam-take__body",children:[(0,x.jsxs)("aside",{className:"exam-take__nav",style:{"--nav-accent":K},children:[(0,x.jsxs)("div",{className:"exam-take__nav-progress",children:[(0,x.jsxs)("div",{className:"exam-take__nav-ring-wrap",children:[(0,x.jsxs)("svg",{className:"exam-take__nav-ring",viewBox:"0 0 48 48","aria-hidden":"true",children:[(0,x.jsx)("circle",{className:"exam-take__nav-ring-bg",cx:"24",cy:"24",r:"19"}),(0,x.jsx)("circle",{className:"exam-take__nav-ring-fill",cx:"24",cy:"24",r:"19",style:{strokeDasharray:"".concat(2*Math.PI*19),strokeDashoffset:"".concat(2*Math.PI*19*(1-G/100))}})]}),(0,x.jsxs)("span",{className:"exam-take__nav-ring-pct",children:[G,(0,x.jsx)("small",{children:"%"})]})]}),(0,x.jsxs)("div",{className:"exam-take__nav-progress-meta",children:[(0,x.jsx)("span",{className:"exam-take__nav-progress-title",children:"Progression"}),(0,x.jsxs)("span",{className:"exam-take__nav-progress-detail",children:[F," sur ",f.length]})]})]}),(0,x.jsx)("div",{className:"exam-take__nav-divider"}),(0,x.jsx)("div",{className:"exam-take__nav-sections",role:"navigation","aria-label":"Navigation des questions par section",children:y.map(e=>{const a=E>=e.start&&E<=e.end,t=Array.from({length:e.count}).filter((a,t)=>{const s=O[e.start+t];return null!=s&&""!==s}).length,s=t===e.count;return(0,x.jsxs)("div",{className:"exam-take__nav-section ".concat(a?"exam-take__nav-section--active":""),children:[(0,x.jsxs)("div",{className:"exam-take__nav-section-title ".concat(a?"exam-take__nav-section-title--current":""),children:[(0,x.jsx)("span",{className:"exam-take__nav-section-name",children:e.title}),(0,x.jsx)("span",{className:"exam-take__nav-section-badge ".concat(s?"exam-take__nav-section-badge--done":""),children:s?"‚úì":"".concat(t,"/").concat(e.count)})]}),(0,x.jsx)("div",{className:"exam-take__nav-section-grid",children:Array.from({length:e.count}).map((a,t)=>{const s=e.start+t,n=f[s],r=null!=O[s]&&""!==O[s],c=s>=ee.start&&s<=ee.end;let l="exam-take__nav-btn";c?l+=" exam-take__nav-btn--current":r&&(l+=" exam-take__nav-btn--answered");const i=function(e,a){const t=e._displayNumber;if(!t)return String(a+1);if(t.length<=4)return t;const s=t.match(/^([A-Z]+)[\-.]?\s*.*?(\d+)$/i);if(s){let e=s[1];e.length>2&&(e=e.slice(0,2)+".");const a=e+s[2];return a.length<=5?a:a.slice(0,4)+"‚Ä¶"}return t.slice(0,3)+"‚Ä¶"}(n,s),o=w.find(e=>s>=e.start&&s<=e.end);return(0,x.jsxs)("button",{className:l,onClick:()=>I(o?o.start:s),title:"Question ".concat(h(n,s)),type:"button",children:[i,r&&!c&&(0,x.jsx)("span",{className:"exam-take__nav-btn-check","aria-hidden":"true"})]},s)})})]},"".concat(e.start,"-").concat(e.end,"-").concat(e.title))})})]}),(0,x.jsxs)("div",{className:"exam-take__content",ref:W,children:[J.sectionTitle&&(0,x.jsx)(v,{title:J.sectionTitle,instructions:le&&le.length<=200?le:""}),le&&le.length>200&&(0,x.jsx)(j,{text:le}),ae[0]._subExDirective&&(0,x.jsxs)("div",{className:"exam-take__subex-header",children:[(0,x.jsxs)("span",{className:"exam-take__subex-label",children:[ae[0]._subExGroup,"."]}),(0,x.jsx)("span",{className:"exam-take__subex-directive",children:(0,x.jsx)(_,{text:ae[0]._subExDirective.replace(/^[A-Z][.\-)\s]+/,"")})})]}),ae[0]._wordPool&&(0,x.jsxs)("div",{className:"exam-take__word-pool",children:[(0,x.jsx)("span",{className:"exam-take__word-pool-label",children:"Banque de mots :"})," ",(0,x.jsx)("span",{className:"exam-take__word-pool-words",children:ae[0]._wordPool})]}),ae.map(e=>{var a,t;const s=(0,d._Y)(e.type),n=e._flatIdx;return(0,x.jsxs)("div",{className:"card exam-take__question-card",children:[(0,x.jsxs)("div",{className:"exam-take__question-header",children:[(0,x.jsxs)("span",{className:"exam-take__question-number",children:[(0,x.jsx)("span",{className:"exam-take__question-num-label",children:h(e,n)}),1===ae.length&&(0,x.jsxs)("span",{className:"exam-take__question-num-total",children:[" / ",f.length]})]}),(0,x.jsxs)("span",{className:"exam-take__question-type",style:{background:K+"18",color:K},children:[s.icon," ",s.label]}),e.points&&(0,x.jsxs)("span",{className:"exam-take__question-points",children:[e.points," pt",1!==e.points?"s":""]})]}),e.has_figure&&e.figure_description&&(0,x.jsx)(l.A,{description:e.figure_description}),"fill_blank"===e.type&&(r=e._displayText||e.question,/_{4,}|\.{4,}/.test(r))?(0,x.jsx)("div",{className:"exam-take__question-text",children:(0,x.jsx)(g,{text:e._displayText||e.question,index:n,value:null!==(a=O[n])&&void 0!==a?a:"",onChange:z})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"exam-take__question-text",children:(0,x.jsx)(i.A,{text:e._displayText||e.question})}),(0,x.jsx)("div",{className:"exam-take__answer-area",children:(0,x.jsx)(k,{question:e,index:n,value:null!==(t=O[n])&&void 0!==t?t:"",onChange:z})})]})]},n);var r}),ae.length>1&&(0,x.jsxs)("div",{className:"exam-take__group-counter",children:[ae[0]._subExGroup?"Groupe ".concat(ae[0]._subExGroup):"Groupe"," ‚Äî ",ae.length," questions (",ae[0]._flatIdx+1,"‚Äì",ae[ae.length-1]._flatIdx+1," sur ",f.length,")"]}),(0,x.jsxs)("div",{className:"exam-take__question-nav",children:[(0,x.jsx)("button",{className:"button button--ghost",disabled:se,onClick:()=>{const e=w[X-1];e&&I(e.start)},children:"‚Üê Pr√©c√©dent"}),te?(0,x.jsx)("button",{className:"button button--primary",onClick:()=>L(!0),children:"Terminer l'examen"}):(0,x.jsx)("button",{className:"button button--primary",onClick:()=>{const e=w[X+1];e&&I(e.start)},children:"Suivant ‚Üí"})]})]})]}),P&&(0,x.jsx)("div",{className:"exam-take__overlay",onClick:()=>L(!1),children:(0,x.jsxs)("div",{className:"exam-take__modal card",onClick:e=>e.stopPropagation(),children:[(0,x.jsx)("h3",{children:"Soumettre l'examen ?"}),(0,x.jsxs)("p",{children:["Vous avez r√©pondu √† ",(0,x.jsx)("strong",{children:F})," sur"," ",(0,x.jsx)("strong",{children:f.length})," questions.",F<f.length&&(0,x.jsxs)("span",{className:"exam-take__modal-warning",children:[" ","‚ö†Ô∏è ",f.length-F," question",f.length-F>1?"s":""," sans r√©ponse."]})]}),(0,x.jsxs)("div",{className:"exam-take__modal-actions",children:[(0,x.jsx)("button",{className:"button button--ghost",onClick:()=>L(!1),children:"Continuer l'examen"}),(0,x.jsx)("button",{className:"button button--primary",onClick:U,children:"Soumettre maintenant"})]})]})}),Z&&le&&le.length>200&&(0,x.jsx)("div",{className:"exam-take__overlay",onClick:()=>H(!1),children:(0,x.jsxs)("div",{className:"exam-take__passage-panel",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"exam-take__passage-panel-header",children:[(0,x.jsx)("h3",{children:"üìñ Texte de r√©f√©rence"}),(0,x.jsx)("button",{className:"exam-take__passage-panel-close",onClick:()=>H(!1),type:"button",children:"‚úï"})]}),(0,x.jsx)("div",{className:"exam-take__passage-panel-body",children:(0,x.jsx)(i.A,{text:le})})]})})]})})}},7791:(e,a,t)=>{t.d(a,{O4:()=>i,R3:()=>o,n7:()=>c,qZ:()=>l});var s=t(6540);const n="https://unpkg.com/katex@0.16.9/dist/katex.min.css",r="https://unpkg.com/katex@0.16.9/dist/katex.min.js";function c(){const[e,a]=(0,s.useState)("undefined"!=typeof window&&!!window.katex);return(0,s.useEffect)(()=>{e||(function(e){if(document.querySelector('link[href="'.concat(e,'"]')))return;const a=document.createElement("link");a.rel="stylesheet",a.href=e,document.head.appendChild(a)}(n),function(e,a){if(document.querySelector('script[src="'.concat(e,'"]')))return void(a&&a());const t=document.createElement("script");t.src=e,t.async=!0,t.onload=a||null,document.body.appendChild(t)}(r,()=>a(!0)))},[e]),e}function l(e,a){if(!e)return{__html:""};let t=String(e);return a&&"undefined"!=typeof window&&window.katex?(t=t.replace(/\$\$([\s\S]+?)\$\$/g,(e,a)=>{try{return window.katex.renderToString(a,{displayMode:!0,throwOnError:!1})}catch(a){return e}}),t=t.replace(/\\\((.+?)\\\)/g,(e,a)=>{try{return window.katex.renderToString(a,{throwOnError:!1})}catch(a){return e}}),t=t.replace(/(?<!\$)\$(?!\$)(.+?)(?<!\$)\$(?!\$)/g,(e,a)=>{try{return window.katex.renderToString(a,{throwOnError:!1})}catch(a){return e}})):t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>"),{__html:t}}function i(e){return e&&(e.firstName&&String(e.firstName).trim()||e.name&&String(e.name).trim().split(/\s+/)[0]||e.email&&String(e.email).split("@")[0])||""}function o(e){const a=e.slice();for(let e=a.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}return a}}}]);