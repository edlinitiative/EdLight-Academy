"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[691],{4691:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(4705),n=t(6540),i=t(4589),o=t(7016),l=t(4848);function a(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function c(){const[e,s]=(0,n.useState)([]),[t,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)(null),[u,p]=(0,n.useState)(null);async function h(){try{c(!0);const e=(0,i.rJ)(o.db,"courses"),t=await(0,i.GG)(e),n=[];t.forEach(e=>{n.push(function(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?a(Object(t),!0).forEach(function(s){(0,r.A)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}({id:e.id},e.data()))}),s(n)}catch(e){console.error("Error loading courses:",e),m({type:"error",text:"Error: ".concat(e.message)})}finally{c(!1)}}return(0,n.useEffect)(()=>{h()},[]),t?(0,l.jsx)("section",{className:"section",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{style:{display:"grid",placeItems:"center",minHeight:"60vh"},children:(0,l.jsx)("div",{className:"loading-spinner"})})})}):(0,l.jsx)("section",{className:"section",style:{paddingTop:"2rem"},children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"page-header",style:{marginBottom:"2rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"page-header__eyebrow",children:"Admin"}),(0,l.jsx)("h1",{children:"Course Structure Manager"}),(0,l.jsx)("p",{className:"text-muted",children:"View and manage course units and lessons"})]}),(0,l.jsx)("button",{className:"button button--ghost button--pill",onClick:h,children:"Reload Courses"})]}),d&&(0,l.jsx)("div",{className:"form-message form-message--".concat(d.type),style:{marginBottom:"1.5rem",padding:"1rem",borderRadius:"var(--radius-md)"},children:d.text}),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:e.map(e=>{var s;return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{onClick:()=>p(u===e.id?null:e.id),style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",borderBottom:u===e.id?"1px solid var(--border)":"none"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{style:{fontSize:"1.25rem",marginBottom:"0.25rem"},children:e.display_name||e.name}),(0,l.jsxs)("p",{className:"text-muted",style:{fontSize:"0.875rem"},children:[e.id," • ",(null===(s=e.units)||void 0===s?void 0:s.length)||0," units • ",e.number_of_lessons||0," lessons"]})]}),(0,l.jsx)("span",{style:{fontSize:"1.5rem",transform:u===e.id?"rotate(90deg)":"rotate(0)",transition:"transform 0.2s"},children:"▸"})]}),u===e.id&&(0,l.jsxs)("div",{style:{padding:"1rem"},children:[(e.units||[]).map((s,t)=>{var r;return(0,l.jsxs)("div",{style:{marginBottom:"1.5rem",paddingLeft:"1rem",borderLeft:"3px solid var(--primary)"},children:[(0,l.jsxs)("h3",{style:{fontSize:"1.125rem",marginBottom:"0.75rem",color:"var(--primary)"},children:["Unit ",t+1,": ",s.title]}),(0,l.jsxs)("p",{className:"text-muted",style:{fontSize:"0.875rem",marginBottom:"1rem"},children:["Unit ID: ",s.unitId||s.id," • ",(null===(r=s.lessons)||void 0===r?void 0:r.length)||0," lessons"]}),(s.lessons||[]).length>0?(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:s.lessons.map((r,n)=>(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem 1rem",background:"var(--surface)",borderRadius:"var(--radius-md)",border:"1px solid var(--border)"},children:[(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsxs)("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[(0,l.jsxs)("span",{className:"badge",style:{fontSize:"0.75rem"},children:[t+1,".",n+1]}),(0,l.jsx)("span",{style:{fontWeight:500},children:r.title}),(0,l.jsx)("span",{className:"chip chip--ghost",style:{fontSize:"0.75rem"},children:r.type||"lesson"})]}),(0,l.jsxs)("p",{className:"text-muted",style:{fontSize:"0.8125rem",marginTop:"0.25rem",marginLeft:"2.5rem"},children:["Lesson ID: ",r.lessonId," • Order: ",r.order]})]}),(0,l.jsx)("button",{className:"button button--ghost button--sm",style:{color:"var(--danger)"},onClick:()=>async function(e,s,t,r){if(confirm('Are you sure you want to remove "'.concat(r,'" from this course?')))try{m({type:"info",text:"Removing lesson..."}),await(0,o.MD)(e,s,t),m({type:"success",text:'✅ Successfully removed "'.concat(r,'"')}),await h(),setTimeout(()=>m(null),3e3)}catch(e){console.error("Error removing lesson:",e),m({type:"error",text:"❌ Error: ".concat(e.message)}),setTimeout(()=>m(null),5e3)}}(e.id,s.unitId||s.id,r.lessonId,r.title),children:"Remove"})]},r.lessonId||n))}):(0,l.jsx)("p",{className:"text-muted",style:{fontStyle:"italic"},children:"No lessons in this unit"})]},s.unitId||t)}),(!e.units||0===e.units.length)&&(0,l.jsx)("p",{className:"text-muted",style:{fontStyle:"italic"},children:"No units found in this course"})]})]},e.id)})}),0===e.length&&(0,l.jsx)("div",{className:"card card--message",children:(0,l.jsx)("p",{className:"text-muted",children:"No courses found in Firestore."})})]})})}}}]);