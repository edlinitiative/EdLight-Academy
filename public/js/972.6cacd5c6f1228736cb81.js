"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[972],{4972:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var r=s(6540),l=s(7767),t=s(1444),c=s(9920),n=s(4848);function i(e){let{exam:a,onClick:s}=e;const r=(0,c.cS)(a._subject),l={total:a._questionCount,gradable:a._autoGradable},t=Object.entries(a._typeCounts||{}).sort((e,a)=>a[1]-e[1]).slice(0,3),i=a._title||a.exam_title||"Examen";return(0,n.jsxs)("button",{className:"card exam-card",onClick:s,type:"button","aria-label":"".concat(a._subject," ‚Äî ").concat(i," (").concat(a._year||"",")"),style:{"--exam-accent":r},children:[(0,n.jsxs)("div",{className:"exam-card__header",children:[(0,n.jsx)("span",{className:"exam-card__subject-badge",style:{background:r+"18",color:r},children:a._subject}),a._year>0&&(0,n.jsx)("span",{className:"exam-card__year",children:a._year})]}),(0,n.jsx)("h3",{className:"exam-card__title",title:i,children:i}),(0,n.jsxs)("div",{className:"exam-card__meta",children:[(0,n.jsx)("span",{className:"exam-card__level",children:a._level}),a.duration_minutes>0&&(0,n.jsxs)("span",{className:"exam-card__duration",children:["‚è± ",a.duration_minutes," min"]}),a.language&&(0,n.jsx)("span",{className:"exam-card__lang",children:"fr"===a.language?"üá´üá∑":"ht"===a.language?"üá≠üáπ":"üá¨üáß"})]}),(0,n.jsxs)("div",{className:"exam-card__stats",children:[(0,n.jsxs)("span",{children:[l.total," question",1!==l.total?"s":""]}),l.gradable>0&&(0,n.jsxs)("span",{className:"exam-card__gradable",children:["‚úì ",l.gradable," auto-corrig√©e",1!==l.gradable?"s":""]})]}),t.length>0&&(0,n.jsx)("div",{className:"exam-card__types",children:t.map(e=>{let[a,s]=e;const r=c.ap[a]||c.ap.unknown;return(0,n.jsxs)("span",{className:"exam-card__type-chip",children:[r.icon," ",r.label," (",s,")"]},a)})}),(0,n.jsx)("div",{className:"exam-card__cta",children:(0,n.jsx)("span",{className:"exam-card__cta-text",children:"Commencer ‚Üí"})})]})}const d=()=>{const e=(0,l.Zp)(),{data:a,isLoading:s,error:d}=(0,t.I)({queryKey:["exam-catalog"],queryFn:async()=>{const e=await fetch("/exam_catalog.json");if(!e.ok)throw new Error("Failed to load exam catalog");return e.json()},staleTime:1/0}),o=(0,r.useMemo)(()=>a?(0,c.eG)(a):null,[a]),[m,x]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[_,j]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[b,N]=(0,r.useState)(24),v=m||h||_||g.trim(),w=(0,r.useCallback)(()=>{x(""),u(""),j(""),p(""),N(24)},[]),y=(0,r.useMemo)(()=>{if(!o)return[];let e=o.exams;if(m&&(e=e.filter(e=>e._level===m)),h&&(e=e.filter(e=>e._subject===h)),_&&(e=e.filter(e=>e._year===parseInt(_,10))),g.trim()){const a=g.toLowerCase();e=e.filter(e=>(e._title||e.exam_title||"").toLowerCase().includes(a)||(e.exam_title||"").toLowerCase().includes(a)||(e._subject||"").toLowerCase().includes(a)||(e._yearRaw||"").toLowerCase().includes(a))}return[...e].sort((e,a)=>(a._year||0)-(e._year||0))},[o,m,h,_,g]),f="".concat(m,"|").concat(h,"|").concat(_,"|").concat(g),[C,k]=(0,r.useState)(f);f!==C&&(k(f),N(24));const L=(0,r.useMemo)(()=>y.slice(0,b),[y,b]),E=b<y.length,F=(0,r.useMemo)(()=>{const e=y.reduce((e,a)=>e+a._questionCount,0),a=y.reduce((e,a)=>e+a._autoGradable,0);return{exams:y.length,totalQ:e,gradable:a}},[y]);return s?(0,n.jsx)("section",{className:"section",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"page-header",children:[(0,n.jsx)("h1",{className:"page-header__title",children:"Examens"}),(0,n.jsx)("p",{className:"page-header__subtitle",children:"Chargement du catalogue‚Ä¶"})]}),(0,n.jsx)("div",{className:"card card--centered card--loading",children:(0,n.jsx)("div",{className:"loading-spinner"})})]})}):d?(0,n.jsx)("section",{className:"section",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"page-header",children:(0,n.jsx)("h1",{className:"page-header__title",children:"Examens"})}),(0,n.jsx)("div",{className:"card card--message",children:(0,n.jsxs)("p",{children:["Erreur: ",d.message]})})]})}):(0,n.jsx)("section",{className:"section",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"page-header exam-browser__header",children:[(0,n.jsx)("span",{className:"page-header__eyebrow",children:"Examens"}),(0,n.jsx)("h1",{className:"page-header__title",children:"Examens Nationaux"}),(0,n.jsx)("p",{className:"page-header__subtitle",children:"Banque d'examens officiels du MENFP ‚Äî Baccalaur√©at, 9√®me AF, Concours universitaires"})]}),(0,n.jsxs)("div",{className:"exam-browser__filters-sticky",children:[(0,n.jsxs)("div",{className:"exam-browser__filters",children:[(0,n.jsxs)("select",{className:"exam-browser__select",value:m,onChange:e=>x(e.target.value),"aria-label":"Filtrer par niveau",children:[(0,n.jsx)("option",{value:"",children:"Tous les niveaux"}),o.levels.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("select",{className:"exam-browser__select",value:h,onChange:e=>u(e.target.value),"aria-label":"Filtrer par mati√®re",children:[(0,n.jsx)("option",{value:"",children:"Toutes les mati√®res"}),o.subjects.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("select",{className:"exam-browser__select",value:_,onChange:e=>j(e.target.value),"aria-label":"Filtrer par ann√©e",children:[(0,n.jsx)("option",{value:"",children:"Toutes les ann√©es"}),o.years.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("div",{className:"exam-browser__search-wrap",children:[(0,n.jsxs)("svg",{className:"exam-browser__search-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,n.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,n.jsx)("input",{className:"exam-browser__search",type:"text",placeholder:"Rechercher un examen‚Ä¶",value:g,onChange:e=>p(e.target.value),"aria-label":"Rechercher un examen"})]}),v&&(0,n.jsx)("button",{className:"exam-browser__clear-btn",onClick:w,type:"button",children:"‚úï R√©initialiser"})]}),(0,n.jsxs)("div",{className:"exam-browser__summary",children:[(0,n.jsx)("strong",{children:F.exams})," examens"," ‚Ä¢ ",(0,n.jsx)("strong",{children:F.totalQ.toLocaleString()})," questions",F.gradable>0&&(0,n.jsxs)(n.Fragment,{children:[" ‚Ä¢ ",(0,n.jsx)("strong",{children:F.gradable.toLocaleString()})," auto-corrig√©es"]})]})]}),0===y.length?(0,n.jsxs)("div",{className:"card card--message exam-browser__empty",children:[(0,n.jsx)("p",{children:"Aucun examen trouv√©. Essayez de modifier vos filtres."}),v&&(0,n.jsx)("button",{className:"button button--ghost",onClick:w,type:"button",children:"R√©initialiser les filtres"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"grid grid--exams exam-browser__grid",children:L.map(a=>(0,n.jsx)(i,{exam:a,onClick:()=>e("/exams/".concat(a._idx))},a._idx))}),E&&(0,n.jsx)("div",{className:"exam-browser__load-more",children:(0,n.jsxs)("button",{className:"exam-browser__load-btn",onClick:()=>N(e=>e+24),type:"button",children:["Afficher plus d'examens (",y.length-b," restants)"]})}),(0,n.jsxs)("p",{className:"exam-browser__showing",children:[Math.min(b,y.length)," sur ",y.length," examens affich√©s"]})]})]})})}}}]);