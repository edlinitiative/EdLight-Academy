"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[11],{6011:(e,a,s)=>{s.r(a),s.d(a,{default:()=>I});var t=s(4705),n=s(6540),r=s(7767),l=s(1444),i=s(7028),c=s(3212),o=s(7791),d=s(9920),x=s(4848);function u(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,t)}return s}function m(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?u(Object(s),!0).forEach(function(a){(0,t.A)(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function h(e,a){return e._displayNumber||String(a+1)}function _(e){let{text:a}=e;const s=(0,o.n7)();return a?/\$/.test(a)||/\\\(/.test(a)?(0,x.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(a,s)}):(0,x.jsx)(x.Fragment,{children:a}):null}const p=/\b(montrer\s+que|dÃ©montrer|prouver\s+que|dÃ©duire\s+que|vÃ©rifier\s+que|justifier\s+que|en\s+dÃ©duire|simplifier|factoriser|dÃ©velopper\s+et\s+rÃ©duire|calculer\s+et\s+simplifier|rÃ©soudre\s+(dans|l['']Ã©quation)|dÃ©terminer)\b/i,v=/_{4,}|\.{4,}/g;function j(e){let{title:a,instructions:s}=e;const[t,r]=(0,n.useState)(!1),l=!(null==s||!s.trim());return(0,x.jsxs)("div",{className:"exam-take__section-header",children:[(0,x.jsxs)("div",{className:"exam-take__section-header-top",onClick:()=>l&&r(e=>!e),role:l?"button":void 0,tabIndex:l?0:void 0,onKeyDown:e=>{!l||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r(e=>!e))},children:[(0,x.jsx)("h3",{children:a}),l&&(0,x.jsx)("button",{className:"exam-take__section-toggle",type:"button","aria-label":t?"Afficher les instructions":"Masquer les instructions",tabIndex:-1,children:t?"â–¶":"â–¼"})]}),l&&!t&&(0,x.jsx)(c.A,{text:s})]})}function g(e){let{text:a}=e;const[s,t]=(0,n.useState)(!0);return a?(0,x.jsxs)("div",{className:"exam-take__reading-passage ".concat(s?"":"exam-take__reading-passage--collapsed"),children:[(0,x.jsxs)("div",{className:"exam-take__reading-passage-bar",onClick:()=>t(e=>!e),children:[(0,x.jsx)("span",{className:"exam-take__reading-passage-icon",children:"ðŸ“–"}),(0,x.jsx)("span",{className:"exam-take__reading-passage-label",children:"Texte de rÃ©fÃ©rence"}),(0,x.jsx)("button",{className:"exam-take__reading-passage-toggle",type:"button","aria-label":s?"RÃ©duire le texte":"Afficher le texte",tabIndex:-1,children:s?"â–² RÃ©duire":"â–¼ Afficher le texte"})]}),s&&(0,x.jsx)("div",{className:"exam-take__reading-passage-body",children:(0,x.jsx)(c.A,{text:a})})]}):null}function f(e){let{text:a,index:s,value:t,onChange:r}=e;const l=a.split(v),i=l.length-1,c=i>1?(t||"").split("|").concat(Array(i).fill("")).slice(0,i):[t||""],o=/^\s*\(([^)]+)\)/;return(0,x.jsx)("div",{className:"exam-take__fill-blank-text",children:l.map((e,a)=>{let t="",l=e;if(a>0){const a=e.match(o);a&&(t=a[1],l=e.slice(a[0].length))}return(0,x.jsxs)(n.Fragment,{children:[a>0&&(0,x.jsxs)("span",{className:"exam-take__inline-blank-wrap",children:[t&&(0,x.jsx)("span",{className:"exam-take__inline-blank-hint",children:t}),(0,x.jsx)("input",{type:"text",className:"exam-take__inline-blank",value:c[a-1],onChange:e=>((e,a)=>{if(i<=1)r(s,a);else{const t=[...c];t[e]=a,r(s,t.join("|"))}})(a-1,e.target.value),placeholder:t||"â€¦",autoComplete:"off",spellCheck:"false",style:t?{minWidth:"".concat(Math.max(.6*t.length+2,5),"em")}:void 0})]}),l&&(0,x.jsx)("span",{children:(0,x.jsx)(_,{text:l})})]},a)})})}function N(e){let{question:a,index:s,value:t,onChange:n}=e;const r=a.type||"unknown";if(function(e){const a=e._displayText||e.question||"",s=e.type||"";return!!["calculation","short_answer","essay"].includes(s)&&p.test(a)}(a))return(0,x.jsx)(b,{index:s,value:t,onChange:n});switch(r){case"multiple_choice":return(0,x.jsx)(C,{question:a,index:s,value:t,onChange:n});case"true_false":return(0,x.jsx)(w,{index:s,value:t,onChange:n});case"fill_blank":case"calculation":case"short_answer":default:return(0,x.jsx)(q,{type:r,index:s,value:t,onChange:n});case"essay":return(0,x.jsx)(S,{index:s,value:t,onChange:n});case"matching":return(0,x.jsx)(A,{question:a,index:s,value:t,onChange:n})}}const k=["","Par dÃ©finition","Par hypothÃ¨se","Par simplification","Par factorisation","Par substitution","Par identitÃ© remarquable","Par calcul","Par dÃ©veloppement","Par rÃ©currence","Par l'absurde","Par contraposÃ©e","D'aprÃ¨s le thÃ©orÃ¨me","En utilisant la propriÃ©tÃ©","On en dÃ©duit que","Autre"];function b(e){let{index:a,value:s,onChange:t}=e;const r=(0,o.n7)(),l=(0,n.useMemo)(()=>{if(!s)return[{math:"",justification:""}];try{const e=JSON.parse(s);if(Array.isArray(e)&&e.length>0)return e}catch(e){}return"string"==typeof s&&s.trim()?[{math:s,justification:""}]:[{math:"",justification:""}]},[s]),i=(0,n.useCallback)(e=>{t(a,JSON.stringify(e))},[a,t]),c=(0,n.useCallback)((e,a,s)=>{const t=l.map((t,n)=>n===e?m(m({},t),{},{[a]:s}):t);i(t)},[l,i]),d=(0,n.useCallback)(()=>{i([...l,{math:"",justification:""}])},[l,i]),u=(0,n.useCallback)(e=>{l.length<=1||i(l.filter((a,s)=>s!==e))},[l,i]);return(0,x.jsxs)("div",{className:"proof-input",children:[(0,x.jsxs)("div",{className:"proof-input__header",children:[(0,x.jsx)("span",{className:"proof-input__header-icon",children:"ðŸ“"}),(0,x.jsx)("span",{className:"proof-input__header-title",children:"DÃ©monstration Ã©tape par Ã©tape"}),(0,x.jsxs)("span",{className:"proof-input__header-hint",children:["Utilisez ",(0,x.jsx)("code",{children:"$...$"})," pour les expressions math (ex: ",(0,x.jsxs)("code",{children:["$\\sqrt","{2}","$"]}),")"]})]}),(0,x.jsx)("div",{className:"proof-input__steps",children:l.map((e,a)=>(0,x.jsx)(y,{stepIndex:a,totalSteps:l.length,math:e.math,justification:e.justification,katexReady:r,onMathChange:e=>c(a,"math",e),onJustificationChange:e=>c(a,"justification",e),onRemove:()=>u(a)},a))}),(0,x.jsxs)("button",{type:"button",className:"proof-input__add-step",onClick:d,children:[(0,x.jsx)("span",{className:"proof-input__add-icon",children:"+"})," Ajouter une Ã©tape"]})]})}function y(e){let{stepIndex:a,totalSteps:s,math:t,justification:r,katexReady:l,onMathChange:i,onJustificationChange:c,onRemove:d}=e;const[u,m]=(0,n.useState)(!1),h=t&&(/\$/.test(t)||/\\[a-zA-Z]/.test(t));return(0,x.jsxs)("div",{className:"proof-step ".concat(u?"proof-step--focused":""),children:[(0,x.jsxs)("div",{className:"proof-step__gutter",children:[(0,x.jsx)("span",{className:"proof-step__number",children:a+1}),(0,x.jsx)("div",{className:"proof-step__line"})]}),(0,x.jsxs)("div",{className:"proof-step__body",children:[(0,x.jsxs)("div",{className:"proof-step__math-section",children:[(0,x.jsx)("label",{className:"proof-step__label",children:"Expression / Calcul"}),(0,x.jsx)("textarea",{className:"proof-step__math-input",value:t,onChange:e=>i(e.target.value),onFocus:()=>m(!0),onBlur:()=>m(!1),placeholder:0===a?"Ex: On a $N = 3\\sqrt{\\frac{72}{7}} - 5\\sqrt{\\frac{50}{7}} + 2\\sqrt{\\frac{288}{7}}$":"Continuez votre raisonnementâ€¦",rows:2,spellCheck:"false"}),h&&l&&(0,x.jsxs)("div",{className:"proof-step__preview",children:[(0,x.jsx)("span",{className:"proof-step__preview-label",children:"AperÃ§u :"}),(0,x.jsx)("span",{dangerouslySetInnerHTML:(0,o.qZ)(t,l)})]})]}),(0,x.jsxs)("div",{className:"proof-step__justify-section",children:[(0,x.jsx)("label",{className:"proof-step__label",children:"Justification"}),(0,x.jsxs)("div",{className:"proof-step__justify-row",children:[(0,x.jsxs)("select",{className:"proof-step__justify-select",value:k.includes(r)?r:"Autre",onChange:e=>{const a=e.target.value;"Autre"===a?k.includes(r)&&c(""):c(a)},children:[(0,x.jsx)("option",{value:"",children:"â€” Justification (optionnel) â€”"}),k.slice(1).map(e=>(0,x.jsx)("option",{value:e,children:e},e))]}),!k.includes(r)&&(0,x.jsx)("input",{className:"proof-step__justify-custom",type:"text",value:r,onChange:e=>c(e.target.value),placeholder:"Justification personnalisÃ©eâ€¦"})]})]})]}),s>1&&(0,x.jsx)("button",{type:"button",className:"proof-step__remove",onClick:d,"aria-label":"Supprimer cette Ã©tape",title:"Supprimer cette Ã©tape",children:"âœ•"})]})}function C(e){let{question:a,index:s,value:t,onChange:n}=e;const r=a.options||{},l=Object.entries(r);return 0===l.length?(0,x.jsxs)("div",{className:"exam-take__no-options",children:[(0,x.jsx)("p",{children:"Options non disponibles pour cette question. Tapez votre rÃ©ponse :"}),(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(s,e.target.value),placeholder:"Votre rÃ©ponseâ€¦"})]}):(0,x.jsx)("div",{className:"exam-take__mcq-options",children:l.map(e=>{let[a,r]=e;const l=t===a;return(0,x.jsxs)("label",{className:"exam-take__mcq-option ".concat(l?"exam-take__mcq-option--selected":""),children:[(0,x.jsx)("input",{type:"radio",name:"q-".concat(s),value:a,checked:l,onChange:()=>n(s,a),className:"exam-take__mcq-radio"}),(0,x.jsx)("span",{className:"exam-take__mcq-key",children:a.toUpperCase()}),(0,x.jsx)("span",{className:"exam-take__mcq-text",children:(0,x.jsx)(_,{text:r})})]},a)})})}function w(e){let{index:a,value:s,onChange:t}=e;return(0,x.jsx)("div",{className:"exam-take__tf-options",children:[{key:"vrai",label:"âœ… Vrai"},{key:"faux",label:"âŒ Faux"}].map(e=>{let{key:n,label:r}=e;const l=s===n;return(0,x.jsxs)("label",{className:"exam-take__tf-option ".concat(l?"exam-take__tf-option--selected":""),children:[(0,x.jsx)("input",{type:"radio",name:"q-".concat(a),value:n,checked:l,onChange:()=>t(a,n),className:"exam-take__tf-radio"}),(0,x.jsx)("span",{children:r})]},n)})})}function q(e){let{type:a,index:s,value:t,onChange:n}=e;return(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(s,e.target.value),placeholder:{fill_blank:"ComplÃ©tez le blancâ€¦",calculation:"Entrez votre rÃ©sultatâ€¦",short_answer:"Votre rÃ©ponseâ€¦"}[a]||"Votre rÃ©ponseâ€¦"})}function S(e){let{index:a,value:s,onChange:t}=e;return(0,x.jsx)("textarea",{className:"exam-take__essay-input",value:s,onChange:e=>t(a,e.target.value),placeholder:"RÃ©digez votre rÃ©ponse iciâ€¦",rows:8})}function A(e){let{question:a,index:s,value:t,onChange:n}=e;return(0,x.jsxs)("div",{className:"exam-take__matching",children:[(0,x.jsx)("p",{className:"exam-take__matching-hint",children:"Entrez vos correspondances (ex: 1-B, 2-A, 3-C)"}),(0,x.jsx)("input",{className:"exam-take__text-input",type:"text",value:t,onChange:e=>n(s,e.target.value),placeholder:"1-B, 2-A, 3-Câ€¦"})]})}const I=()=>{var e;const{examIndex:a}=(0,r.g)(),s=(0,r.Zp)(),{data:t,isLoading:u,error:p}=((0,o.n7)(),(0,l.I)({queryKey:["exam-catalog"],queryFn:async()=>{const e=await fetch("/exam_catalog.json");if(!e.ok)throw new Error("Failed to load exam catalog");return e.json()},staleTime:1/0})),v=parseInt(a,10),k=null==t?void 0:t[v],b=(0,n.useMemo)(()=>k?(0,d.Y)(k):[],[k]),y=(0,n.useMemo)(()=>{const e=[];for(let t=0;t<b.length;t++){var a,s;const n=String((null===(a=b[t])||void 0===a?void 0:a.sectionTitle)||"").trim()||"Questions",r=String((null===(s=b[t])||void 0===s?void 0:s.sectionInstructions)||"").trim(),l=e[e.length-1];l&&l.title===n&&l.instructions===r?l.end=t:e.push({title:n,instructions:r,start:t,end:t})}return e.map(e=>m(m({},e),{},{count:e.end-e.start+1}))},[b]),C=(0,n.useMemo)(()=>{const e=[];for(let a=0;a<b.length;a++){const s=b[a]._subExGroup,t=e[e.length-1];s&&t&&t.group===s?(t.end=a,t.indices.push(a)):e.push({group:s,start:a,end:a,indices:[a]})}return e},[b]),[w,q]=(0,n.useState)(!1),S=(0,n.useMemo)(()=>{if(!k)return null;let e=[];const a=(k.sections||[]).map(a=>{const s=(a.instructions||"").trim(),{rules:t,cleanedText:n}=(0,d.P5)(s);return t.length&&e.push(...t),m(m({},a),{},{_cleanInstructions:s?n:null,_hadRules:t.length>0})}),s=new Set;return{rules:e.filter(e=>{const a=e.toLowerCase().replace(/[^a-zÃ -Ã¿0-9]/gi,"").slice(0,40);return!s.has(a)&&(s.add(a),!0)}),cleanedSections:a}},[k]),[A,I]=(0,n.useState)(0),[P,E]=(0,n.useState)({}),[O,M]=(0,n.useState)(!1),[T,L]=(0,n.useState)(!1),D=(null==k?void 0:k.duration_minutes)||0,[R,$]=(0,n.useState)(60*D),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(D&&!O)return $(60*D),z.current=setInterval(()=>{$(e=>e<=1?(clearInterval(z.current),0):e-1)},1e3),()=>clearInterval(z.current)},[D,O]),(0,n.useEffect)(()=>{D&&0===R&&!O&&H()},[R]);const B=e=>{const a=Math.floor(e/3600),s=Math.floor(e%3600/60),t=e%60;return a>0?"".concat(a,":").concat(String(s).padStart(2,"0"),":").concat(String(t).padStart(2,"0")):"".concat(s,":").concat(String(t).padStart(2,"0"))},V=(0,n.useCallback)((e,a)=>{E(s=>m(m({},s),{},{[e]:a}))},[]),J=Object.keys(P).filter(e=>{const a=P[e];if(null==a||""===a)return!1;if("string"==typeof a&&a.startsWith("["))try{const e=JSON.parse(a);return Array.isArray(e)&&e.some(e=>{var a;return null===(a=e.math)||void 0===a?void 0:a.trim()})}catch(e){}return!0}).length,F=b.length>0?Math.round(J/b.length*100):0;(0,n.useEffect)(()=>{const e=e=>{"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable||("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),I(e=>{const a=C.findIndex(a=>e>=a.start&&e<=a.end),s=C[a+1];return s?s.start:e})):"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),I(e=>{const a=C.findIndex(a=>e>=a.start&&e<=a.end),s=C[a-1];return s?s.start:e})))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b.length,C]);const G=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=G.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},[A]);const[W,Z]=(0,n.useState)(!1),H=(0,n.useCallback)(()=>{clearInterval(z.current),M(!0);const e=(0,d.$4)(b,P);sessionStorage.setItem("exam-result-".concat(v),JSON.stringify({examIndex:v,examTitle:(0,d.Vj)(k),subject:(0,d.c$)(k.subject),level:(0,d.yf)(k.level),result:e,timestamp:Date.now()})),s("/exams/".concat(v,"/results"))},[b,P,v,k,s]);if(u)return(0,x.jsx)("section",{className:"section",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"card card--centered card--loading",children:(0,x.jsx)("div",{className:"loading-spinner"})})})});if(p||!k)return(0,x.jsx)("section",{className:"section",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("div",{className:"card card--message",children:[(0,x.jsx)("p",{children:"Examen introuvable."}),(0,x.jsx)("button",{className:"button button--primary",onClick:()=>s("/exams"),children:"â† Retour aux examens"})]})})});const U=(0,d.c$)(k.subject),Y=(0,d.cS)(U);if(!w){var K;const e=(k.sections||[]).map((e,a)=>({title:e.section_title||"Section ".concat(a+1),qCount:(e.questions||[]).length})),a=e.reduce((e,a)=>e+a.qCount,0),t=e=>{const a=e.toLowerCase();return a.includes("interdit")?"ðŸš«":a.includes("silence")?"ðŸ¤«":a.includes("obligatoire")?"âš ï¸":a.includes("durÃ©e")||a.includes("heure")?"â°":a.includes("coefficient")?"ðŸ“Š":"â„¹ï¸"};return(0,x.jsxs)("section",{className:"exam-cover",style:{"--cover-accent":Y},children:[(0,x.jsxs)("div",{className:"exam-cover__bg",children:[(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--1"}),(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--2"}),(0,x.jsx)("div",{className:"exam-cover__orb exam-cover__orb--3"}),(0,x.jsx)("div",{className:"exam-cover__grid"})]}),(0,x.jsxs)("div",{className:"exam-cover__inner",children:[(0,x.jsxs)("nav",{className:"exam-cover__nav",children:[(0,x.jsxs)("button",{className:"exam-cover__back",onClick:()=>s("/exams"),children:[(0,x.jsx)("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),(0,x.jsxs)("div",{className:"exam-cover__brand",children:[(0,x.jsx)("span",{className:"exam-cover__brand-icon",children:"ðŸŽ“"}),(0,x.jsx)("span",{children:"EdLight Academy"})]})]}),(0,x.jsxs)("div",{className:"exam-cover__hero",children:[(0,x.jsx)("div",{className:"exam-cover__badge",style:{background:Y,color:"#fff"},children:U}),(0,x.jsx)("h1",{className:"exam-cover__title",children:(0,d.Vj)(k)}),k.year&&(0,x.jsx)("p",{className:"exam-cover__year",children:k.year}),(0,x.jsxs)("div",{className:"exam-cover__stats",children:[D>0&&(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:D}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"minutes"})]}),k.total_points>0&&(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:k.total_points}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"points"})]}),(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:a}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:"questions"})]}),(0,x.jsxs)("div",{className:"exam-cover__stat",children:[(0,x.jsx)("span",{className:"exam-cover__stat-value",children:e.length}),(0,x.jsx)("span",{className:"exam-cover__stat-label",children:e.length>1?"sections":"section"})]})]})]}),(0,x.jsxs)("div",{className:"exam-cover__body",children:[(0,x.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--sections",children:[(0,x.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,x.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Structure"]}),(0,x.jsx)("ol",{className:"exam-cover__section-list",children:e.map((e,a)=>(0,x.jsxs)("li",{className:"exam-cover__section-row",children:[(0,x.jsx)("span",{className:"exam-cover__section-dot",style:{background:Y}}),(0,x.jsx)("span",{className:"exam-cover__section-name",children:e.title}),(0,x.jsx)("span",{className:"exam-cover__section-qty",children:e.qCount})]},a))})]}),(null==S||null===(K=S.rules)||void 0===K?void 0:K.length)>0&&(0,x.jsxs)("div",{className:"exam-cover__panel exam-cover__panel--rules",children:[(0,x.jsxs)("h2",{className:"exam-cover__panel-heading",children:[(0,x.jsx)("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Consignes"]}),(0,x.jsx)("ul",{className:"exam-cover__rules-list",children:S.rules.map((e,a)=>(0,x.jsxs)("li",{className:"exam-cover__rule-item",children:[(0,x.jsx)("span",{className:"exam-cover__rule-icon",children:t(e)}),(0,x.jsx)("span",{children:e})]},a))})]})]}),(0,x.jsxs)("div",{className:"exam-cover__cta",children:[(0,x.jsxs)("button",{className:"exam-cover__start-btn",style:{background:Y},onClick:()=>q(!0),children:[(0,x.jsx)("span",{children:"Commencer l'examen"}),(0,x.jsx)("svg",{width:"22",height:"22",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,x.jsx)("p",{className:"exam-cover__cta-hint",children:"Bonne chance ! ðŸ€"})]})]})]})}const Q=b[A];if(!Q)return null;const X=C.findIndex(e=>A>=e.start&&A<=e.end),ee=C[X]||{start:A,end:A,indices:[A],group:null},ae=ee.indices.map(e=>m(m({},b[e]),{},{_flatIdx:e})),se=X>=C.length-1,te=X<=0,ne=((0,d._Y)(Q.type),D&&R<300),re=(k.sections||[]).findIndex(e=>e.section_title===Q.sectionTitle),le=null==S||null===(e=S.cleanedSections)||void 0===e?void 0:e[re],ie=null!=le&&le._hadRules?le._cleanInstructions||"":Q.sectionInstructions||"";return(0,x.jsx)("section",{className:"section exam-take",children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"exam-take__topbar",children:[(0,x.jsxs)("div",{className:"exam-take__topbar-left",children:[(0,x.jsx)("button",{className:"button button--ghost button--sm",onClick:()=>s("/exams"),children:"â† Examens"}),(0,x.jsxs)("div",{className:"exam-take__exam-info",children:[(0,x.jsx)("span",{className:"exam-take__subject",style:{color:Y},children:U}),(0,x.jsx)("span",{className:"exam-take__title-short",children:(0,d.Vj)(k)})]})]}),(0,x.jsxs)("div",{className:"exam-take__topbar-right",children:[(0,x.jsxs)("span",{className:"exam-take__progress",children:[J,"/",b.length]}),D>0&&(0,x.jsxs)("span",{className:"exam-take__timer ".concat(ne?"exam-take__timer--warning":""),"aria-live":"polite","aria-label":"Temps restant: ".concat(B(R)),children:[(0,x.jsx)("span",{"aria-hidden":"true",children:"â±"})," ",B(R)]}),(0,x.jsx)("button",{className:"button button--primary button--sm",onClick:()=>L(!0),children:"Soumettre"})]})]}),(0,x.jsx)("div",{className:"exam-take__progress-bar",role:"progressbar","aria-valuenow":F,"aria-valuemin":0,"aria-valuemax":100,children:(0,x.jsx)("div",{className:"exam-take__progress-fill",style:{width:"".concat(F,"%")}})}),(0,x.jsxs)("div",{className:"exam-take__body",children:[(0,x.jsxs)("aside",{className:"exam-take__nav",style:{"--nav-accent":Y},children:[(0,x.jsxs)("div",{className:"exam-take__nav-progress",children:[(0,x.jsxs)("div",{className:"exam-take__nav-ring-wrap",children:[(0,x.jsxs)("svg",{className:"exam-take__nav-ring",viewBox:"0 0 48 48","aria-hidden":"true",children:[(0,x.jsx)("circle",{className:"exam-take__nav-ring-bg",cx:"24",cy:"24",r:"19"}),(0,x.jsx)("circle",{className:"exam-take__nav-ring-fill",cx:"24",cy:"24",r:"19",style:{strokeDasharray:"".concat(2*Math.PI*19),strokeDashoffset:"".concat(2*Math.PI*19*(1-F/100))}})]}),(0,x.jsxs)("span",{className:"exam-take__nav-ring-pct",children:[F,(0,x.jsx)("small",{children:"%"})]})]}),(0,x.jsxs)("div",{className:"exam-take__nav-progress-meta",children:[(0,x.jsx)("span",{className:"exam-take__nav-progress-title",children:"Progression"}),(0,x.jsxs)("span",{className:"exam-take__nav-progress-detail",children:[J," sur ",b.length]})]})]}),(0,x.jsx)("div",{className:"exam-take__nav-divider"}),(0,x.jsx)("div",{className:"exam-take__nav-sections",role:"navigation","aria-label":"Navigation des questions par section",children:y.map(e=>{const a=A>=e.start&&A<=e.end,s=Array.from({length:e.count}).filter((a,s)=>{const t=P[e.start+s];return null!=t&&""!==t}).length,t=s===e.count;return(0,x.jsxs)("div",{className:"exam-take__nav-section ".concat(a?"exam-take__nav-section--active":""),children:[(0,x.jsxs)("div",{className:"exam-take__nav-section-title ".concat(a?"exam-take__nav-section-title--current":""),children:[(0,x.jsx)("span",{className:"exam-take__nav-section-name",children:e.title}),(0,x.jsx)("span",{className:"exam-take__nav-section-badge ".concat(t?"exam-take__nav-section-badge--done":""),children:t?"âœ“":"".concat(s,"/").concat(e.count)})]}),(0,x.jsx)("div",{className:"exam-take__nav-section-grid",children:Array.from({length:e.count}).map((a,s)=>{const t=e.start+s,n=b[t],r=null!=P[t]&&""!==P[t],l=t>=ee.start&&t<=ee.end;let i="exam-take__nav-btn";l?i+=" exam-take__nav-btn--current":r&&(i+=" exam-take__nav-btn--answered");const c=function(e,a){const s=e._displayNumber;if(!s)return String(a+1);if(s.length<=4)return s;const t=s.match(/^([A-Z]+)[\-.]?\s*.*?(\d+)$/i);if(t){let e=t[1];e.length>2&&(e=e.slice(0,2)+".");const a=e+t[2];return a.length<=5?a:a.slice(0,4)+"â€¦"}return s.slice(0,3)+"â€¦"}(n,t),o=C.find(e=>t>=e.start&&t<=e.end);return(0,x.jsxs)("button",{className:i,onClick:()=>I(o?o.start:t),title:"Question ".concat(h(n,t)),type:"button",children:[c,r&&!l&&(0,x.jsx)("span",{className:"exam-take__nav-btn-check","aria-hidden":"true"})]},t)})})]},"".concat(e.start,"-").concat(e.end,"-").concat(e.title))})})]}),(0,x.jsxs)("div",{className:"exam-take__content",ref:G,children:[Q.sectionTitle&&(0,x.jsx)(j,{title:Q.sectionTitle,instructions:ie&&ie.length<=200?ie:""}),ie&&ie.length>200&&(0,x.jsx)(g,{text:ie}),ae[0]._subExDirective&&(0,x.jsxs)("div",{className:"exam-take__subex-header",children:[(0,x.jsxs)("span",{className:"exam-take__subex-label",children:[ae[0]._subExGroup,"."]}),(0,x.jsx)("span",{className:"exam-take__subex-directive",children:(0,x.jsx)(_,{text:ae[0]._subExDirective.replace(/^[A-Z][.\-)\s]+/,"")})})]}),ae[0]._wordPool&&(0,x.jsxs)("div",{className:"exam-take__word-pool",children:[(0,x.jsx)("span",{className:"exam-take__word-pool-label",children:"Banque de mots :"})," ",(0,x.jsx)("span",{className:"exam-take__word-pool-words",children:ae[0]._wordPool})]}),ae.map(e=>{var a,s;const t=(0,d._Y)(e.type),n=e._flatIdx;return(0,x.jsxs)("div",{className:"card exam-take__question-card",children:[(0,x.jsxs)("div",{className:"exam-take__question-header",children:[(0,x.jsxs)("span",{className:"exam-take__question-number",children:[(0,x.jsx)("span",{className:"exam-take__question-num-label",children:h(e,n)}),1===ae.length&&(0,x.jsxs)("span",{className:"exam-take__question-num-total",children:[" / ",b.length]})]}),(0,x.jsxs)("span",{className:"exam-take__question-type",style:{background:Y+"18",color:Y},children:[t.icon," ",t.label]}),e.points&&(0,x.jsxs)("span",{className:"exam-take__question-points",children:[e.points," pt",1!==e.points?"s":""]})]}),e.has_figure&&e.figure_description&&(0,x.jsx)(i.A,{description:e.figure_description}),"fill_blank"===e.type&&(r=e._displayText||e.question,/_{4,}|\.{4,}/.test(r))?(0,x.jsx)("div",{className:"exam-take__question-text",children:(0,x.jsx)(f,{text:e._displayText||e.question,index:n,value:null!==(a=P[n])&&void 0!==a?a:"",onChange:V})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"exam-take__question-text",children:(0,x.jsx)(c.A,{text:e._displayText||e.question})}),(0,x.jsx)("div",{className:"exam-take__answer-area",children:(0,x.jsx)(N,{question:e,index:n,value:null!==(s=P[n])&&void 0!==s?s:"",onChange:V})})]})]},n);var r}),ae.length>1&&(0,x.jsxs)("div",{className:"exam-take__group-counter",children:[ae[0]._subExGroup?"Groupe ".concat(ae[0]._subExGroup):"Groupe"," â€” ",ae.length," questions (",ae[0]._flatIdx+1,"â€“",ae[ae.length-1]._flatIdx+1," sur ",b.length,")"]}),(0,x.jsxs)("div",{className:"exam-take__question-nav",children:[(0,x.jsx)("button",{className:"button button--ghost",disabled:te,onClick:()=>{const e=C[X-1];e&&I(e.start)},children:"â† PrÃ©cÃ©dent"}),se?(0,x.jsx)("button",{className:"button button--primary",onClick:()=>L(!0),children:"Terminer l'examen"}):(0,x.jsx)("button",{className:"button button--primary",onClick:()=>{const e=C[X+1];e&&I(e.start)},children:"Suivant â†’"})]})]})]}),T&&(0,x.jsx)("div",{className:"exam-take__overlay",onClick:()=>L(!1),children:(0,x.jsxs)("div",{className:"exam-take__modal card",onClick:e=>e.stopPropagation(),children:[(0,x.jsx)("h3",{children:"Soumettre l'examen ?"}),(0,x.jsxs)("p",{children:["Vous avez rÃ©pondu Ã  ",(0,x.jsx)("strong",{children:J})," sur"," ",(0,x.jsx)("strong",{children:b.length})," questions.",J<b.length&&(0,x.jsxs)("span",{className:"exam-take__modal-warning",children:[" ","âš ï¸ ",b.length-J," question",b.length-J>1?"s":""," sans rÃ©ponse."]})]}),(0,x.jsxs)("div",{className:"exam-take__modal-actions",children:[(0,x.jsx)("button",{className:"button button--ghost",onClick:()=>L(!1),children:"Continuer l'examen"}),(0,x.jsx)("button",{className:"button button--primary",onClick:H,children:"Soumettre maintenant"})]})]})}),W&&ie&&ie.length>200&&(0,x.jsx)("div",{className:"exam-take__overlay",onClick:()=>Z(!1),children:(0,x.jsxs)("div",{className:"exam-take__passage-panel",onClick:e=>e.stopPropagation(),children:[(0,x.jsxs)("div",{className:"exam-take__passage-panel-header",children:[(0,x.jsx)("h3",{children:"ðŸ“– Texte de rÃ©fÃ©rence"}),(0,x.jsx)("button",{className:"exam-take__passage-panel-close",onClick:()=>Z(!1),type:"button",children:"âœ•"})]}),(0,x.jsx)("div",{className:"exam-take__passage-panel-body",children:(0,x.jsx)(c.A,{text:ie})})]})})]})})}}}]);