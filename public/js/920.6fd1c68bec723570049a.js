"use strict";(self.webpackChunkedlight_academy=self.webpackChunkedlight_academy||[]).push([[920],{3263:(e,s,t)=>{function r(e){if(!e||"string"!=typeof e)return NaN;const s=e.replace(/Math\.\w+/g,"");if(/[^0-9+\-*/().,%e ]/.test(s))return NaN;try{const s=new Function("Math",'"use strict"; return ('.concat(e,");"))(Math);return"number"==typeof s?s:NaN}catch(e){return NaN}}function i(e){if(null==e)return NaN;const s=String(e).trim();if(!s)return NaN;const t=parseFloat(s.replace(/,/g,"."));if(!isNaN(t)&&/^[0-9,.\-+]+$/.test(s))return t;const i=function(e){if(!e||"string"!=typeof e)return null;let s=e.trim();s=s.replace(/^\$\$?|\$\$?$/g,"").trim(),s=s.replace(/\\(?:left|right|big|Big|bigg|Bigg)\s*/g,""),s=s.replace(/\\text\{([^}]*)\}/g,"($1)");for(let e=0;e<10;e++){const e=s;if(s=s.replace(/\\sqrt\s*\[([^\]]+)\]\s*\{([^{}]*)\}/g,"Math.pow($2,1/($1))"),s===e)break}for(let e=0;e<10;e++){const e=s;if(s=s.replace(/\\sqrt\s*\{([^{}]*)\}/g,"Math.sqrt($1)"),s===e)break}for(let e=0;e<10;e++){const e=s;if(s=s.replace(/([0-9a-zA-Z.)]+)\s*\^\s*\{([^{}]*)\}/g,"Math.pow($1,$2)"),s===e)break}s=s.replace(/([0-9a-zA-Z.)]+)\s*\^\s*([0-9a-zA-Z])/g,"Math.pow($1,$2)");for(let e=0;e<10;e++){const e=s;if(s=s.replace(/\\frac\s*\{([^{}]*)\}\s*\{([^{}]*)\}/g,"(($1)/($2))"),s===e)break}s=s.replace(/\\pi\b/g,"Math.PI");const t=["sin","cos","tan","ln","log","exp","abs"];for(const e of t){const t="ln"===e?"Math.log":"abs"===e?"Math.abs":"Math.".concat(e);s=s.replace(new RegExp("\\\\".concat(e,"\\s*\\{([^{}]*)\\}"),"g"),"".concat(t,"($1)")),s=s.replace(new RegExp("\\\\".concat(e,"\\s*\\(([^)]*)\\)"),"g"),"".concat(t,"($1)")),s=s.replace(new RegExp("\\\\".concat(e,"\\s+([0-9a-zA-Z.]+)"),"g"),"".concat(t,"($1)"))}return s=s.replace(/\\times/g,"*"),s=s.replace(/\\cdot/g,"*"),s=s.replace(/\\div/g,"/"),s=s.replace(/\\pm/g,"+"),s=s.replace(/\\[a-zA-Z]+/g,""),s=s.replace(/\{/g,"("),s=s.replace(/\}/g,")"),s=s.replace(/([0-9])(\()/g,"$1*$2"),s=s.replace(/(\))(\()/g,"$1*$2"),s=s.replace(/(\))(Math\.)/g,"$1*$2"),s=s.replace(/(\))([0-9a-zA-Z])/g,"$1*$2"),s=s.replace(/([0-9])(Math\.)/g,"$1*$2"),s=s.replace(/([0-9])([a-zA-Z])/g,"$1*$2"),s=s.replace(/\s+/g,""),s=s.replace(/\+\-/g,"-"),s=s.replace(/\-\+/g,"-"),s||null}(s);if(i){const e=r(i);if(!isNaN(e))return e}const n=r(s.replace(/sqrt/gi,"Math.sqrt").replace(/pi/gi,"Math.PI").replace(/\^/g,"**"));return isNaN(n)?NaN:n}function n(e){return e?String(e).replace(/^\$\$?|\$\$?$/g,"").replace(/\\,/g,"").replace(/\s+/g," ").replace(/,/g,".").trim().toLowerCase():""}function a(e,s){const t=n(e),r=n(s);if(!t||!r)return{correct:!1,method:"empty",details:{}};if(t===r)return{correct:!0,method:"exact",details:{}};const a=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ");if(a(t)===a(r))return{correct:!0,method:"normalized",details:{}};const o=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;const r={equivalent:!1,valueA:null,valueB:null},n=i(e),a=i(s);return r.valueA=isNaN(n)?null:n,r.valueB=isNaN(a)?null:a,null!==r.valueA&&null!==r.valueB&&(Math.abs(n)<t&&Math.abs(a)<t?r.equivalent=!0:Math.abs(n)>1?r.equivalent=Math.abs(n-a)/Math.abs(n)<t:r.equivalent=Math.abs(n-a)<t),r}(e,s);return o.equivalent?{correct:!0,method:"cas",details:o}:{correct:!1,method:"cas",details:o}}t.d(s,{Ku:()=>a})},9920:(e,s,t)=>{t.d(s,{$4:()=>C,P5:()=>M,Vj:()=>N,Y:()=>O,_Y:()=>S,ap:()=>f,c$:()=>c,cS:()=>h,eG:()=>I,yf:()=>u});var r=t(4705),i=t(3263);function n(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?n(Object(t),!0).forEach(function(s){(0,r.A)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}const o={francais:"Fran√ßais",fran√ßais:"Fran√ßais",anglais:"Anglais","anglais - business":"Anglais","anglais et espagnol":"Anglais",espagnol:"Espagnol","espagnol - gastronom√≠a":"Espagnol",mathematiques:"Math√©matiques",math√©matiques:"Math√©matiques","math√©matiques topographie":"Math√©matiques","math√©matiques, chimie, physique, compr√©hension de texte":"Mixed",physique:"Physique","physique - onde":"Physique",chimie:"Chimie","chimie - hydrocarbures":"Chimie","chimie organique":"Chimie","chimie (ses) brome":"Chimie","chimie (svt, smp)":"Chimie","chimie (svt, smp) alcool : sr":"Chimie","chimie (svt, smp) macromol√©cule : sr":"Chimie",svt:"SVT","svt (sciences de la vie et de la terre)":"SVT","svt - anatomie":"SVT","svt - cytologie":"SVT","svt - morphologie":"SVT","svt - pal√©ontologie":"SVT","svt cardiaque":"SVT","svt histologie":"SVT","svt morphologie":"SVT","svt microbiologie":"SVT","svt, g√©n√©tique, g√©ologie":"SVT","biologie et g√©ologie":"SVT","biologie / g√©ologie":"SVT","biologie / g√©ologie (svt) - polynevrite : sr":"SVT","bio/g√©o":"SVT",g√©ologie:"SVT",anatomie:"SVT",zoologie:"SVT","cytologie (svt)":"SVT","histoire et g√©ographie":"Histoire-G√©o","histoire - g√©ographie":"Histoire-G√©o","histoire-g√©ographie":"Histoire-G√©o",philosophie:"Philosophie","philosophie (esth√©tique)":"Philosophie","philosophie (religion)":"Philosophie","philosophie - logique":"Philosophie","philosophie, sciences humaines, culture ha√Øtienne":"Philosophie",kreyol:"Krey√≤l",krey√≤l:"Krey√≤l","kominikasyon krey√≤l":"Krey√≤l",√©conomie:"√âconomie",art_musique:"Art & Musique","art et musique":"Art & Musique","arts et musique":"Art & Musique","√©ducation esth√©tique et artistique":"Art & Musique",informatique:"Informatique",sant√©:"Sant√©","sciences infirmi√®res":"Sant√©","sciences infirmi√®res - bloc materno-infantile et bloc sant√© mentale":"Sant√©","soins infirmiers":"Sant√©",mixed:"Mixed","culture g√©n√©rale":"Culture G√©n√©rale","connaissances g√©n√©rales":"Culture G√©n√©rale","concours d'admission":"Culture G√©n√©rale",√©thique:"Philosophie"};function c(e){if(!e)return"Autre";const s=e.trim().toLowerCase();return o[s]||e.trim()}const l={baccalaureat:"Baccalaur√©at","9eme_af":"9√®me AF",universite:"Universit√©"};function u(e){return e?l[e.trim().toLowerCase()]||e.trim():""}const E=/(?:JANVIER|F[√âE]VRIER|MARS|AVRIL|MAI|JUIN|JUILLET|AO[√õU]T|SEPTEMBRE|OCTOBRE|NOVEMBRE|D[√âE]CEMBRE)/i,g={janvier:"Janvier",fevrier:"F√©vrier",f√©vrier:"F√©vrier",mars:"Mars",avril:"Avril",mai:"Mai",juin:"Juin",juillet:"Juillet",aout:"Ao√ªt",ao√ªt:"Ao√ªt",septembre:"Septembre",octobre:"Octobre",novembre:"Novembre",decembre:"D√©cembre",d√©cembre:"D√©cembre"};function p(e){const s=String(e||"").trim();if(!s)return{year:0,session:""};const t=s.match(new RegExp("(".concat(E.source,")\\s*(\\d{4})"),"i"));if(t){const e=g[t[1].toLowerCase()]||t[1],s=parseInt(t[2],10);return{year:s,session:"".concat(e," ").concat(s)}}const r=s.match(/\d{4}/g);return r?{year:Math.max(...r.map(Number)),session:""}:{year:0,session:""}}const A=[/MINIST[√àE]RE\s+(?:DE\s+L[''']?)?[√âE]DUCATION\s+NATIONALE\s+(?:ET\s+)?(?:DE\s+LA\s+)?FORMATION\s+PROFESSIONNELLE\s*(?:[,(]\s*MENFP\s*\)?\s*)?/gi,/FILI[√àE]RES?\s+(?:D[''']?)?ENSEIGNEMENT\s+G[√âE]N[√âE]RAL/gi,/EXAMENS?\s+(?:DE\s+)?FIN\s+D[''']?[√âE]TUDES?\s+SECONDAIRES/gi,/BACCALAUR[√âE]AT\s+(?:D[''']?ENSEIGNEMENT\s+G[√âE]N[√âE]RAL\s*)?(?:2[√àE]ME\s+PARTIE\s*)?/gi,/BACCALAUR[√âE]AT\s+(?:R[√âE]GULIER|PERMANENT)\s*/gi,/BACCALAUR[√âE]AT\s+SESSION\s+(?:ORDINAIRE|EXTRAORDINAIRE)\s*/gi,/BAC\s+PERMANENT\s*/gi,/[√âE]PREUVES?\s+NATIONALES?\s+(?:DE\s+FIN\s+D[''']?[√âE]TUDES?\s+SECONDAIRES\s*)?/gi,/S[√âE]RIES?\s*:?\s*\([^)]*\)\s*/gi,/S[√âE]RIES?\s*:?\s*[A-Z,/\s-]+(?=\s|$)/gi,/(?:SESSION\s+(?:ORDINAIRE|EXTRAORDINAIRE)\s*)?[-‚Äì‚Äî]?\s*(?:JANVIER|F[√âE]VRIER|MARS|AVRIL|MAI|JUIN|JUILLET|AO[√õU]T|SEPTEMBRE|OCTOBRE|NOVEMBRE|D[√âE]CEMBRE)\s*[-‚Äì‚Äî]?\s*\d{0,4}\s*/gi,/[-‚Äì‚Äî]\s*\d{4}\s*/g,/[√âE]PREUVE\s+(?:DE\s+|D['''])/gi,/EGZAMEN\s+FEN\s+ETID[√àE]?\s+SEGOND[√àE]?/gi,/BAKALOREYA\s+(?:SESYON\s+(?:JEN|JIY[√àE]|JIV√à|OUT)|P[√àE]MANAN|REGILYE)\s*[-‚Äì‚Äî]?\s*(?:JEN|JIY[√àE]|JIV√à|OUT|MAS|FEVRIYE|JANVYE|AVR[I√å]L|DESANM)?\s*\d{0,4}\s*/gi,/MINIST[√àE√â]\S*\s+(?:(?!\bMENFP\b).)*\bMENFP\b\s*\)?\s*/gi,/MINIST[√àE√â]\S*\s+\S+\s+NA[TS]?YONAL\S*\s+(?:AK|ET)\s+(?:DE\s+)?(?:LA\s+)?F[O√í]\S*MASYON\s+P\S+\s*/gi,/BIWO\s+NASYONAL\s+EGZAMEN\s+LETA\s*/gi,/DIR[E√à]KSYON\s+ANS[√àE]YMAN\s+FONDAMANTAL\s*/gi,/FIL[IY][√àE√â]R?E?\s+ANS[√àE√â]YMAN\s+JENERAL\s*/gi,/FIL[VY][√àE√â]\s+ANS[√àE√â]YMAN\s+JENERAL\s*/gi,/SECONDE?\s+IV\s*/gi,/PERMANENT[E]?\s+SECONDE?\s+IV\s*/gi,/SERI\s*:?\s*\([^)]*\)\s*/gi,/SERI\s*:\s*[A-Z,/\s-]+(?=\s|$)/gi,/\bSES\s*\([^)]*\)\s*/gi,/S[√àE]VIS\s+(?:SOSYAL|JESYON)\s+\w*\s*/gi,/SEGOND[√àE√âI]\s+IV\s*/gi,/BAK\s+P[√àE]MANAN\s*[-‚Äì‚Äî]?\s*(?:JEN|JIYE|OUT|MAS|FEVRIYE|JANVYE)?\s*/gi,/(?:MATOMANN|RABONNEN|POTORIK)\s*/gi,/UNIVERSIT[√âE]\s+D[''']?[√âE]TAT\s+D[''']?HA[√èI]TI\s*[-‚Äì‚Äî]?\s*(?:Facult[√©e]\s+[^-‚Äì‚Äî\n]*)?/gi,/BUREAU\s+NATIONAL\s+DES\s+EXAMENS\s+D[''']?[√âE]TAT\s*\/?\s*(?:DIRECTION\s+[^-‚Äì‚Äî\n]*)?/gi,/DIRECTION\s+DE\s+L[''']?ENSEIGNEMENT\s+FONDAMENTAL\s*/gi,/FACULT[√âE√à]\s+DE\s+M[√âE√à]DECINE\s+(?:ET\s+DE\s+PHARMACIE\s+)?(?:ET\s+L[''']?[√âE√à]COLE\s+[^-‚Äì‚Äî\n]*)?/gi,/EGZAMEN\s+\d+[√àE]M\s+ANE\s+FONDAMANTAL\s*/gi,/EXAMEN\s+DE\s+\d+[√àE]ME\s+ANN[√âE√à]E\s+FONDAMENTALE\s*/gi,/CONCOURS\s+D[''']?(?:ADMISSION|ENTR[√âE√à]E)\s+(?:EN\s+\w+\s+ANN[√âE√à]E\s*)?/gi,/MINIST[√àE√â]RE?\s+DE\s+LA\s+SANT[√âE√à]\s+PUBLIQUE\s+ET\s+DE\s+LA\s+POPULATION\s*/gi,/EXAMEN\s+D[''']?[√âE√à]TAT\s+EN\s+SCIENCES\s+INFIRMI[√àE]RES\s*/gi,/CENTRE\s+DE\s+TECHNIQUES\s+DE\s+PLANIFICATION\s+ET\s+D[''']?[√âE√à]CONOMIE\s+APPLIQU[√âE√à]E\s*\(\s*CTPEA\s*\)\s*/gi,/INSTITUT\s+NATIONAL\s+D[''']?ADMINISTRATION[^()]*?\(\s*INAGHEI\s*\)?\s*/gi,/SESSION\s+(?:ORDINAIRE|EXTRAORDINAIRE)\s*/gi,/\([A-Z]{2,5}(?:[\s,/-]+[A-Z]{2,5})*\)\s*/gi,/^\s*[-‚Äì‚Äî:,.\s]+/,/\s*[-‚Äì‚Äî:,.\s]+$/];function N(e){const s=String(e.exam_title||"").trim(),t=c(e.subject),{year:r,session:i}=p(e.year),n=function(e){const s=e.match(/S[√âE]RIES?\s*:?\s*\(?([A-Za-z,/\s-]+)\)?/i);return s?s[1].replace(/\s+/g," ").replace(/\s*[,/]\s*/g,", ").trim().toUpperCase():""}(s),a=function(e){const s=e.match(new RegExp("(?:SESSION\\s+(?:ORDINAIRE|EXTRAORDINAIRE)\\s*)?[-‚Äì‚Äî]?\\s*(".concat(E.source,")\\s*[-‚Äì‚Äî]?\\s*(\\d{4})"),"i"));if(!s)return"";const t=g[s[1].toLowerCase()]||s[1];return"".concat(t," ").concat(s[2])}(s);let o=s;for(const e of A)o=o.replace(e," ");if(o=o.replace(/\s{2,}/g," ").trim(),o=o.replace(/^[\s\-‚Äì‚Äî:,.]+|[\s\-‚Äì‚Äî:,.]+$/g,"").trim(),t){const e=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp("\\b".concat(e,"\\b\\s*[-‚Äì‚Äî:]?\\s*"),"gi"),"").trim()}if(e.subject){const s=String(e.subject).trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp("\\b".concat(s,"\\b\\s*[-‚Äì‚Äî:]?\\s*"),"gi"),"").trim()}o=o.replace(/^(?:R[√âE]GULIER|PERMANENT)\s*/i,"").trim(),o=o.replace(/\bfin\s+d[''']?[√©e]tudes?\s+secondaires\b/gi,"").trim(),o=o.replace(/^(?:Examen|[√âE]preuve)\s+(?:de\s+|d['''])/i,"").trim(),o=o.replace(/\b(?:Deuxi[√®e]me|2[√®e]me)\s+partie\b/gi,"").trim(),o=o.replace(/\b\d{4}\b/g,"").trim(),o=o.replace(/^\d+$/,"").trim(),o=o.replace(/^[\s\-‚Äì‚Äî:,.()[\]]+|[\s\-‚Äì‚Äî:,.()[\]]+$/g,"").trim(),o.length<8&&/^[a-z√†-√ø]+$/i.test(o)&&t&&t.toLowerCase().includes(o.toLowerCase())&&(o=""),/^[A-Z]{2,4}(?:[\s,/-]+[A-Z]{2,4})*$/i.test(o)&&(o=""),t&&o.toLowerCase().replace(/[^a-z√†-√ø]/g,"")===t.toLowerCase().replace(/[^a-z√†-√ø]/g,"")&&(o=""),/^(?:PHILO\s+)?[A-Z][\s-]*[A-Z]?$/i.test(o)&&(o=""),o=o.replace(/\bMENFP\b\s*/gi,"").trim(),o=o.replace(/^(?:JEN|JIY[√àE]|JIV[√àE]|OUT|MAS|FEVRIYE|JANVYE|AVR[I√å]L|DESANM)$/i,"").trim(),o=o.replace(/^[\s\-‚Äì‚Äî:,.()[\]/]+|[\s\-‚Äì‚Äî:,.()[\]/]+$/g,"").trim(),o.length<=2&&(o="");const l=[t||"Examen"];if(o){let e;e=o.length>3&&o===o.toUpperCase()?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():o,l.push("‚Äî"),l.push(e)}const u=a||i,N=[];if(n){const e=n.split(/[,\s]+/).filter(e=>e.length>=2&&e.toUpperCase()!==t.toUpperCase()).join(", ");e&&N.push(e)}return u?N.push(u):r&&N.push(String(r)),N.length?(l.push("¬∑"),l.push(N.join(" ¬∑ "))):!o&&r&&(l.push("¬∑"),l.push(String(r))),l.join(" ")}const m={Fran√ßais:"#8b5cf6",Anglais:"#3b82f6",Espagnol:"#f59e0b",Math√©matiques:"#ef4444",Physique:"#06b6d4",Chimie:"#22c55e",SVT:"#10b981","Histoire-G√©o":"#f97316",Philosophie:"#a855f7",Krey√≤l:"#ec4899",√âconomie:"#14b8a6","Art & Musique":"#d946ef",Informatique:"#6366f1",Sant√©:"#e11d48","Culture G√©n√©rale":"#64748b",Mixed:"#78716c"};function h(e){return m[e]||"#6366f1"}const f={multiple_choice:{icon:"üîò",label:"QCM",gradable:!0},true_false:{icon:"‚úÖ",label:"Vrai/Faux",gradable:!0},fill_blank:{icon:"‚úèÔ∏è",label:"Compl√©ter",gradable:!0},calculation:{icon:"üßÆ",label:"Calcul",gradable:!0},short_answer:{icon:"üìù",label:"R√©ponse courte",gradable:!0},essay:{icon:"üìÑ",label:"R√©daction",gradable:!1},matching:{icon:"üîó",label:"Appariement",gradable:!1},unknown:{icon:"‚ùì",label:"Autre",gradable:!1}};function S(e){return f[e]||f.unknown}function I(e){const s=new Set,t=new Set,r=new Set;return{exams:e.map((e,i)=>{const n=c(e.subject),o=u(e.level),l=String(e.year||""),{year:E}=p(l),g=N(e);let A=0,m=0;const h={};for(const s of e.sections||[])for(const e of s.questions||[]){A++;const s=e.type||"unknown";h[s]=(h[s]||0)+1,(f[s]||f.unknown).gradable&&e.correct&&m++}return n&&t.add(n),o&&s.add(o),E&&r.add(E),a(a({},e),{},{_idx:i,_subject:n,_level:o,_title:g,_yearRaw:l,_year:E,_questionCount:A,_autoGradable:m,_typeCounts:h})}),levels:[...s].sort(),subjects:[...t].sort(),years:[...r].sort((e,s)=>s-e)}}function d(e){if(!e)return null;const s=String(e).trim(),t=s.match(/^([A-Z]+(?:\.[A-Z]+)*)(?:[.\-]?\d|$)/i);return t?t[1]:/^[A-Z]$/i.test(s)?s:null}function b(e,s,t){if(!e)return{cleanText:"",directive:"",wordPool:""};let r=e,i="",n="";if(t){const e=r.match(/^([A-Z][\.\-\)]\s*.+?)(?:\s*\(?\s*\d+\s*%\s*\)?\s*)?\n/);e&&(i=e[1].replace(/\s*\(?\s*\d+\s*%\s*\)?\s*$/,"").trim(),r=r.slice(e[0].length))}const a=/\((?:Word\s*pool|Word\s*bank|Banque\s*de\s*mots|Mots)\s*:\s*([^)]+)\)/gi,o=[...r.matchAll(a)];return o.length>0&&(n=o[0][1].trim(),r=r.replace(a,"").trim()),r=r.replace(/^(?:\d+|[a-z])[\.\)]\s*/,""),r=r.replace(/^\s*\(?\s*\d+\s*%\s*\)?\s*\n?/,""),r=r.replace(/^(.+?)\s+\d+\s*%\s*$/m,"$1"),r=r.replace(/^\s*\n/,"").trim(),{cleanText:r,directive:i,wordPool:n}}const T=/interdit|calculat|silence\s+est|obligatoire|gadget|t√©l√©phone|tablette|ipad|montre intelligente|portable|coefficient|dur√©e\s*(?:de\s+l[''']√©|:)|√©change\s+de\s+papier/i,R=/(?:Consignes?\s*(?:g√©n√©rales?\s*)?(?:de\s+l['''](?:examen|√©valuation)\s*)?|Instructions?\s*(?:g√©n√©rales?\s*)?(?:de\s+l['''](?:examen|√©valuation)\s*)?)[:.]?\s*/gi;function M(e){if(!e||!e.trim())return{rules:[],cleanedText:""};const s=e.trim(),t=s.split("\n"),r=[];for(const e of t){const s=e.trim();if(!s){r.push("");continue}let t=s.replace(/(?<=[a-zA-Z√Ä-√ø]\.)\s+(?=\d+[-.)]\s|[A-Z√Ä-√ø])/g,"\0");t=t.replace(/\s+(?=\d+[-.)]\s+[A-Z√Ä-√ø])/g,"\0");const i=t.split("\0");r.push(...i)}const i=/^\d+[-.)]\s/,n=[],a=[];for(const e of r){let s=e.trim();if(!s){a.push("");continue}const t=s.replace(R,"").trim();if(!t)continue;const r=t.replace(i,"").trim();T.test(t)&&r.length<300?n.push(r):a.push(e)}if(n.length<2)return{rules:[],cleanedText:s};const o=a.join("\n").replace(/^\s*\n+/,"").replace(/\n{3,}/g,"\n\n").trim();return{rules:n.filter(e=>e.length>5),cleanedText:o}}function O(e){const s=[];for(const t of e.sections||[]){let e=null;for(let r=0;r<(t.questions||[]).length;r++){const i=t.questions[r],n=String(i.number||"").trim(),o=d(n),c=null!==o&&o!==e,{cleanText:l,directive:u,wordPool:E}=b(i.question||"",0,c);s.push(a(a({},i),{},{sectionTitle:t.section_title||"",sectionInstructions:t.instructions||"",_displayText:l,_subExGroup:o,_subExDirective:u,_subExFirstInGroup:c,_wordPool:E,_displayNumber:n})),null!==o&&(e=o)}}return s}function C(e,s){let t=0,r=0,n=0,a=0,o=0,c=0,l=0;const u=e.map((e,u)=>{const E=null!=s[u]?s[u]:null,g=e.points||1;t+=g;const p=f[e.type]||f.unknown;if(null==E||""===E)return o++,{question:e,userAnswer:null,status:"unanswered",result:{awarded:0,maxPoints:g}};if(!p.gradable||!e.correct)return c++,{question:e,userAnswer:E,status:"manual",result:{awarded:0,maxPoints:g}};l++;const A=function(e,s){const t=(e.correct||"").trim().toLowerCase(),r=String(s).trim().toLowerCase();if(!t||!r)return!1;switch(e.type){case"multiple_choice":default:return r===t;case"true_false":{const e=new Set(["vrai","true","v","t","oui","yes"]),s=new Set(["faux","false","f","non","no"]);return(e.has(r)?"true":s.has(r)?"false":r)===(e.has(t)?"true":s.has(t)?"false":t)}case"fill_blank":case"calculation":case"short_answer":{let e=r;if("string"==typeof s&&(s.startsWith("{")||s.startsWith("[")))try{const t=JSON.parse(s);if(t&&t.finalAnswer)e=t.finalAnswer.trim().toLowerCase();else if(Array.isArray(t))return!1}catch(e){}if(!e)return!1;const n=t;if(e===n)return!0;const a=parseFloat(e.replace(/,/g,".")),o=parseFloat(n.replace(/,/g,"."));if(!isNaN(a)&&!isNaN(o))return Math.abs(a-o)<.01;if((0,i.Ku)(e,n).correct)return!0;const c=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ");return c(e)===c(n)}}}(e,E);return A?(n++,r+=g):a++,{question:e,userAnswer:E,status:A?"correct":"incorrect",result:{awarded:A?g:0,maxPoints:g}}});return{summary:{totalPoints:t,earnedPoints:r,correctCount:n,incorrectCount:a,unanswered:o,manualReview:c,autoGraded:l,percentage:t>0?Math.round(r/t*100):0},results:u}}}}]);